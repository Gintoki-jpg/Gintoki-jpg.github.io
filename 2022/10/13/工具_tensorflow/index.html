

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/bg/logo.png">
  <link rel="icon" href="/img/bg/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="æ¨å†ä¿¨">
  <meta name="keywords" content="">
  
    <meta name="description" content="ä¹‹å‰æœ‰ä½¿ç”¨è¿‡tensorflowï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰æ·±å…¥çš„æ€»ç»“è¿‡ï¼Œè¿™é‡Œåšä¸€ä¸ªå­¦ä¹ æ±‡æ€»ï¼›">
<meta property="og:type" content="article">
<meta property="og:title" content="Tensorflow">
<meta property="og:url" content="https://gintoki-jpg.github.io/2022/10/13/%E5%B7%A5%E5%85%B7_tensorflow/index.html">
<meta property="og:site_name" content="Tintoki_blog">
<meta property="og:description" content="ä¹‹å‰æœ‰ä½¿ç”¨è¿‡tensorflowï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰æ·±å…¥çš„æ€»ç»“è¿‡ï¼Œè¿™é‡Œåšä¸€ä¸ªå­¦ä¹ æ±‡æ€»ï¼›">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gintoki-jpg.github.io/img/bg/TOOLS.PNG">
<meta property="article:published_time" content="2022-10-13T01:34:00.000Z">
<meta property="article:modified_time" content="2023-05-09T10:57:06.600Z">
<meta property="article:author" content="YangZaiyan">
<meta property="article:tag" content="æœºå™¨å­¦ä¹ ">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://gintoki-jpg.github.io/img/bg/TOOLS.PNG">
  
  
  
  <title>Tensorflow - Tintoki_blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"gintoki-jpg.github.io","root":"/","version":"1.9.1","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Tintoki_blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/bg/bg1.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">Tensorflow</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-10-13 09:34" pubdate>
          2022å¹´10æœˆ13æ—¥ ä¸Šåˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          19k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          158 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Tensorflow</h1>
            
            <div class="markdown-body">
              
              <h1 id="ç¬¬ä¸€ç« -tensorflow2-xåŸºç¡€"><a href="#ç¬¬ä¸€ç« -tensorflow2-xåŸºç¡€" class="headerlink" title="ç¬¬ä¸€ç«  tensorflow2.xåŸºç¡€"></a>ç¬¬ä¸€ç«  tensorflow2.xåŸºç¡€</h1><h2 id="1-æ•°æ®ç±»å‹"><a href="#1-æ•°æ®ç±»å‹" class="headerlink" title="1.æ•°æ®ç±»å‹"></a>1.æ•°æ®ç±»å‹</h2><p>tensorflowå†…éƒ¨çš„æ•°æ®å‡ä¿å­˜åœ¨<code>å¼ é‡å¯¹è±¡</code>ä¸Šï¼Œæ‰€æœ‰çš„OPéƒ½æ˜¯åŸºäºå¼ é‡å¯¹è±¡è¿›è¡Œçš„ï¼›tensorflowä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹åŒ…å«æ•°å€¼ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹å’Œå¸ƒå°”ç±»å‹ï¼›</p>
<h3 id="1-1-æ•°å€¼ç±»å‹"><a href="#1-1-æ•°å€¼ç±»å‹" class="headerlink" title="1.1 æ•°å€¼ç±»å‹"></a>1.1 æ•°å€¼ç±»å‹</h3><p>æ•°å€¼ç±»å‹çš„å¼ é‡æ˜¯tensorflowä¸»è¦çš„æ•°æ®è½½ä½“ï¼Œæ ¹æ®ç»´åº¦å¯ä»¥åˆ†ä¸ºï¼š</p>
<ul>
<li><p>æ ‡é‡ï¼ˆScalarï¼‰ï¼šå•ä¸ªçš„å®æ•°ï¼Œå¦‚1.2ï¼Œ3.4ç­‰ï¼Œç»´åº¦ï¼ˆDimensionï¼‰æ•°ä¸º0ï¼Œshapeä¸º[]ï¼›</p>
</li>
<li><p>å‘é‡ï¼ˆVectorï¼‰ï¼šnä¸ªå®æ•°çš„æœ‰åºé›†åˆï¼Œé€šè¿‡ä¸­æ‹¬å·åŒ…è£¹ï¼Œå¦‚[1.2]ï¼Œ[1.2ï¼Œ3.4]ç­‰ï¼Œç»´åº¦æ•°ä¸º1ï¼Œé•¿åº¦ä¸å®šï¼Œshapeä¸º[n]ï¼›</p>
</li>
<li><p>çŸ©é˜µï¼ˆMatrixï¼‰ï¼šnè¡Œmåˆ—å®æ•°çš„æœ‰åºé›†åˆï¼Œå¦‚[[1ï¼Œ2]ï¼Œ[3ï¼Œ4]]ï¼Œç»´åº¦ä¸º2ï¼Œæ¯ä¸ªç»´åº¦ä¸Šçš„é•¿åº¦ä¸å®šï¼Œshapeä¸º[n,m]ï¼›</p>
</li>
<li><p>å¼ é‡ï¼ˆTensorï¼‰ï¼šæ‰€æœ‰ç»´åº¦æ•°dim &gt;2çš„æ•°ç»„ç»Ÿç§°ä¸ºå¼ é‡ã€‚å¼ é‡çš„æ¯ä¸ªç»´åº¦ä¹Ÿç§°ä½œè½´ï¼ˆAxisï¼‰ï¼Œæ¯ä¸ªç»´åº¦ä»£è¡¨äº†å…·ä½“çš„ç‰©ç†å«ä¹‰ã€‚æ¯”å¦‚Shapeä¸º[2ï¼Œ32ï¼Œ32ï¼Œ3]çš„å¼ é‡å…±æœ‰4ç»´ï¼Œå¦‚æœè¡¨ç¤ºå›¾ç‰‡æ•°æ®çš„è¯ï¼Œæ¯ä¸ªç»´åº¦&#x2F;è½´ä»£è¡¨çš„å«ä¹‰åˆ†åˆ«æ˜¯å›¾ç‰‡æ•°é‡ã€å›¾ç‰‡é«˜åº¦ã€å›¾ç‰‡å®½åº¦ã€å›¾ç‰‡é€šé“æ•°ï¼Œå…¶ä¸­2ä»£è¡¨äº†2å¼ å›¾ç‰‡ï¼Œ32ä»£è¡¨äº†é«˜ã€å®½å‡ä¸º32ï¼Œ3ä»£è¡¨äº†RGBå…±3ä¸ªé€šé“ã€‚å¼ é‡çš„ç»´åº¦æ•°ä»¥åŠæ¯ä¸ªç»´åº¦æ‰€ä»£è¡¨çš„å…·ä½“ç‰©ç†å«ä¹‰éœ€è¦ç”±ç”¨æˆ·è‡ªè¡Œå®šä¹‰ï¼›</p>
</li>
</ul>
<p>tensorflowä¸­å°†ä¸Šè¿°å››è€…ç»Ÿç§°ä¸ºå¼ é‡ï¼Œå¯ä»¥æ ¹æ®å¼ é‡çš„ç»´åº¦æˆ–å½¢çŠ¶è‡ªè¡Œåˆ¤æ–­ï¼›</p>
<blockquote>
<p>åˆ›å»º0ç»´å¼ é‡</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">1</span>]:<br>	a = <span class="hljs-number">1.2</span> <span class="hljs-comment"># python è¯­è¨€æ–¹å¼åˆ›å»ºæ ‡é‡</span><br>	aa = tf.constant(<span class="hljs-number">1.2</span>) <span class="hljs-comment"># TF æ–¹å¼åˆ›å»ºæ ‡é‡</span><br>	<span class="hljs-built_in">type</span>(a), <span class="hljs-built_in">type</span>(aa), tf.is_tensor(aa)<span class="hljs-comment">#è¾“å‡ºç±»å‹ä»¥åŠåˆ¤æ–­æ˜¯å¦ä¸ºtensor</span><br>Out[<span class="hljs-number">1</span>]:<br>	(<span class="hljs-built_in">float</span>, tensorflow.python.framework.ops.EagerTensor, <span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>

<p>ä¸æ ‡é‡ä¸åŒï¼Œå‘é‡çš„å®šä¹‰é¡»é€šè¿‡ List å®¹å™¨ä¼ ç»™ tf.constant()å‡½æ•°</p>
<blockquote>
<p>åˆ›å»ºå‘é‡</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">5</span>]:<br>	a = tf.constant([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>, <span class="hljs-number">3.</span>]) <span class="hljs-comment"># åˆ›å»º 3 ä¸ªå…ƒç´ çš„å‘é‡</span><br>	a, a.shape<br>Out[<span class="hljs-number">5</span>]:<br>	(&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">11</span>, shape=(<span class="hljs-number">3</span>,), dtype=float32, numpy=array([<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>],dtype=float32)&gt;,TensorShape([<span class="hljs-number">3</span>]))<br></code></pre></td></tr></table></figure>

<blockquote>
<p>åˆ›å»ºçŸ©é˜µ</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">6</span>]:<br>	a = tf.constant([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]]) <span class="hljs-comment"># åˆ›å»º 2 è¡Œ 2 åˆ—çš„çŸ©é˜µ</span><br>	a, a.shape<br>Out[<span class="hljs-number">6</span>]:<br>	(&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">13</span>, shape=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dtype=int32, numpy=array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>],[<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])&gt;, TensorShape([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>])<br></code></pre></td></tr></table></figure>

<h4 id="1-1-1-æ•°å€¼ç²¾åº¦"><a href="#1-1-1-æ•°å€¼ç²¾åº¦" class="headerlink" title="1.1.1 æ•°å€¼ç²¾åº¦"></a>1.1.1 æ•°å€¼ç²¾åº¦</h4><p>å¯¹äºæ•°å€¼ç±»å‹çš„å¼ é‡ï¼Œå¯ä»¥ä¿å­˜ä¸ºä¸åŒå­—èŠ‚é•¿åº¦çš„ç²¾åº¦ï¼Œä½è¶Šé•¿åˆ™ç²¾åº¦è¶Šé«˜å ç”¨çš„å†…å­˜ç©ºé—´è¶Šå¤§ï¼›</p>
<p>å¸¸ç”¨çš„ç²¾åº¦ç±»å‹æœ‰tf.int16ã€tf.int32ã€tf.int64ã€tf.float16ã€tf.float32ã€tf.float64 ç­‰ï¼Œå…¶ä¸­ tf.float64 å³ä¸º tf.doubleï¼›</p>
<p>åœ¨åˆ›å»ºå¼ é‡çš„åŒæ—¶å¯ä»¥æŒ‡å®šå¼ é‡çš„ä¿å­˜ç²¾åº¦</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">12</span>]: <span class="hljs-comment"># åˆ›å»ºæŒ‡å®šç²¾åº¦çš„å¼ é‡</span><br>tf.constant(<span class="hljs-number">123456789</span>, dtype=tf.int16)<br>tf.constant(<span class="hljs-number">123456789</span>, dtype=tf.int32)<br>Out[<span class="hljs-number">12</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">33</span>, shape=(), dtype=int16, numpy=-<span class="hljs-number">13035</span>&gt;<span class="hljs-comment">#ä¿å­˜ç²¾åº¦è¿‡ä½ï¼Œæ•°æ®å‘ç”Ÿæº¢å‡ºï¼ˆä¸€èˆ¬ä¸é€‰æ‹©int16ä¿å­˜ç²¾åº¦)</span><br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">35</span>, shape=(), dtype=int32, numpy=<span class="hljs-number">123456789</span>&gt;<br></code></pre></td></tr></table></figure>

<p>é€šè¿‡è®¿é—®å¼ é‡çš„dtypeæˆå‘˜å±æ€§å¯ä»¥åˆ¤æ–­å¼ é‡çš„ä¿å­˜ç²¾åº¦</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">15</span>]:<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;before:&#x27;</span>,a.dtype) <span class="hljs-comment"># è¯»å–åŸæœ‰å¼ é‡çš„æ•°å€¼ç²¾åº¦</span><br><span class="hljs-keyword">if</span> a.dtype != tf.float32: <span class="hljs-comment"># å¦‚æœç²¾åº¦ä¸ç¬¦åˆè¦æ±‚ï¼Œåˆ™è¿›è¡Œè½¬æ¢</span><br>	a = tf.cast(a,tf.float32) <span class="hljs-comment"># tf.cast å‡½æ•°å¯ä»¥å®Œæˆç²¾åº¦è½¬æ¢</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after :&#x27;</span>,a.dtype) <span class="hljs-comment"># æ‰“å°è½¬æ¢åçš„ç²¾åº¦</span><br>Out[<span class="hljs-number">15</span>]:<br>before: &lt;dtype: <span class="hljs-string">&#x27;float16&#x27;</span>&gt;<br>after : &lt;dtype: <span class="hljs-string">&#x27;float32&#x27;</span>&gt;<br><span class="hljs-comment">#è¿™æ ·æ“ä½œçš„æ„ä¹‰åœ¨äºé’ˆå¯¹æŸäº›åªèƒ½å¤„ç†ç‰¹å®šç²¾åº¦çš„è¿ç®—å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†</span><br></code></pre></td></tr></table></figure>

<h3 id="1-2-å­—ç¬¦ä¸²ç±»å‹"><a href="#1-2-å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="1.2 å­—ç¬¦ä¸²ç±»å‹"></a>1.2 å­—ç¬¦ä¸²ç±»å‹</h3><p>tensorflowä¸­çš„å­—ç¬¦ä¸²ç±»å‹æ•°æ®å¯ä»¥è®¤ä¸ºå°±æ˜¯Cä¸­çš„å­—ç¬¦ä¸²ç±»ä¼¼ï¼Œä¾‹å¦‚å¯ä»¥å°†å›¾ç‰‡è·¯å¾„ä¿å­˜ä¸ºè·¯å¾„å­—ç¬¦ä¸²ï¼Œåªéœ€è¦ä¼ å…¥å­—ç¬¦ä¸²å¯¹è±¡å°±èƒ½åˆ›å»ºå­—ç¬¦ä¸²ç±»å‹çš„å¼ é‡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">8</span>]:<br>a = tf.constant(<span class="hljs-string">&#x27;Hello, Deep Learning.&#x27;</span>) <span class="hljs-comment"># åˆ›å»ºå­—ç¬¦ä¸²</span><br>Out[<span class="hljs-number">8</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">17</span>, shape=(), dtype=string, numpy=<span class="hljs-string">b&#x27;Hello, Deep Learning.&#x27;</span>&gt;<br></code></pre></td></tr></table></figure>

<h3 id="1-3-å¸ƒå°”ç±»å‹"><a href="#1-3-å¸ƒå°”ç±»å‹" class="headerlink" title="1.3 å¸ƒå°”ç±»å‹"></a>1.3 å¸ƒå°”ç±»å‹</h3><p>tensorflowå¼•å…¥å¸ƒå°”ç±»å‹ä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿæ–¹ä¾¿åœ°æ¯”è¾ƒè¿ç®—æ“ä½œçš„ç»“æœï¼Œå¸ƒå°”ç±»å‹çš„å¼ é‡åªéœ€è¦ä¼ å…¥ Python è¯­è¨€çš„å¸ƒå°”ç±»å‹æ•°æ®ï¼Œè½¬æ¢æˆ TensorFlow å†…éƒ¨å¸ƒå°”å‹å³å¯</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">10</span>]: a = tf.constant(<span class="hljs-literal">True</span>) <span class="hljs-comment"># åˆ›å»ºå¸ƒå°”ç±»å‹æ ‡é‡</span><br>Out[<span class="hljs-number">10</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">22</span>, shape=(), dtype=<span class="hljs-built_in">bool</span>, numpy=<span class="hljs-literal">True</span>&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">11</span>]:<br>a = tf.constant([<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>]) <span class="hljs-comment"># åˆ›å»ºå¸ƒå°”ç±»å‹å‘é‡</span><br>Out[<span class="hljs-number">11</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">25</span>, shape=(<span class="hljs-number">2</span>,), dtype=<span class="hljs-built_in">bool</span>, numpy=array([ <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>])&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>å°½ç®¡å¯ä»¥ä½¿ç”¨pythonçš„å¸ƒå°”æ•°æ®åˆ›å»ºtensorflowçš„å¸ƒå°”æ•°æ®ï¼Œä½†æ˜¯ä¸¤è€…å¹¶ä¸ç­‰ä»·</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">11</span>]:<br>a = tf.constant(<span class="hljs-literal">True</span>) <span class="hljs-comment"># åˆ›å»º TF å¸ƒå°”å¼ é‡</span><br>a <span class="hljs-keyword">is</span> <span class="hljs-literal">True</span> <span class="hljs-comment"># TF å¸ƒå°”ç±»å‹å¼ é‡ä¸ python å¸ƒå°”ç±»å‹æ¯”è¾ƒ</span><br>a == <span class="hljs-literal">True</span> <span class="hljs-comment"># ä»…æ•°å€¼æ¯”è¾ƒ</span><br>Out[<span class="hljs-number">11</span>]:<br><span class="hljs-literal">False</span> <span class="hljs-comment"># å¯¹è±¡ä¸ç­‰ä»·</span><br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">8</span>, shape=(), dtype=<span class="hljs-built_in">bool</span>, numpy=<span class="hljs-literal">True</span>&gt; <span class="hljs-comment"># æ•°å€¼æ¯”è¾ƒç»“æœ</span><br></code></pre></td></tr></table></figure>

<h3 id="1-4-Variableç±»å‹"><a href="#1-4-Variableç±»å‹" class="headerlink" title="1.4 Variableç±»å‹"></a>1.4 Variableç±»å‹</h3><p>ä¸ºäº†åŒºåˆ†éœ€è¦è®¡ç®—æ¢¯åº¦ä¿¡æ¯çš„å¼ é‡ä¸ä¸éœ€è¦è®¡ç®—æ¢¯åº¦ä¿¡æ¯çš„å¼ é‡ï¼ŒTensorFlow å¢åŠ äº†ä¸€ç§ä¸“é—¨çš„æ•°æ®ç±»å‹æ¥æ”¯æŒæ¢¯åº¦ä¿¡æ¯çš„è®°å½•ï¼štf.Variableã€‚tf.Variable ç±»å‹åœ¨æ™®é€šçš„å¼ é‡ç±»å‹åŸºç¡€ä¸Šæ·»åŠ äº† nameï¼Œtrainable ç­‰å±æ€§æ¥æ”¯æŒè®¡ç®—å›¾çš„æ„å»ºï¼›</p>
<p>ç”±äºæ¢¯åº¦è¿ç®—ä¼šæ¶ˆè€—å¤§é‡çš„è®¡ç®—èµ„æºï¼Œè€Œä¸”ä¼šè‡ªåŠ¨æ›´æ–°ç›¸å…³å‚æ•°ï¼Œå¯¹äºä¸éœ€è¦çš„ä¼˜åŒ–çš„å¼ é‡ï¼Œå¦‚ç¥ç»ç½‘ç»œçš„è¾“å…¥ğ’€ï¼Œä¸éœ€è¦é€šè¿‡ tf.Variable å°è£…ï¼›ç›¸åï¼Œå¯¹äºéœ€è¦è®¡ç®—æ¢¯åº¦å¹¶ä¼˜åŒ–çš„å¼ é‡ï¼Œå¦‚ç¥ç»ç½‘ç»œå±‚çš„ğ‘¿å’Œğ’ƒï¼Œéœ€è¦é€šè¿‡ tf.Variable åŒ…è£¹ä»¥ä¾¿ TensorFlow è·Ÿè¸ªç›¸å…³æ¢¯åº¦ä¿¡æ¯ï¼›</p>
<blockquote>
<p>é€šè¿‡ tf.Variable()å‡½æ•°å¯ä»¥å°†æ™®é€šå¼ é‡è½¬æ¢ä¸ºå¾…ä¼˜åŒ–å¼ é‡ï¼ˆè¿™ä¸ªåœ°æ–¹çš„å¾…ä¼˜åŒ–å¼ é‡å®é™…ä¸Šå°±æ˜¯1.xä¸­çš„å˜é‡ï¼Œä½†æ˜¯2.xçš„å˜é‡æ„ä¹‰ä»…åœ¨äºæ”¯æŒæ¢¯åº¦è®¡ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬å‘¢ä¸ç§°ä¹‹ä¸ºå˜é‡è€Œæ˜¯Variableï¼‰</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">20</span>]:<br>a = tf.constant([-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]) <span class="hljs-comment"># åˆ›å»º TF å¼ é‡</span><br>aa = tf.Variable(a) <span class="hljs-comment"># è½¬æ¢ä¸º Variable ç±»å‹</span><br>aa.name, aa.trainable <span class="hljs-comment"># Variable ç±»å‹å¼ é‡çš„å±æ€§</span><br>Out[<span class="hljs-number">20</span>]:<br>(<span class="hljs-string">&#x27;Variable:0&#x27;</span>, <span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>

<p>å±æ€§nameå’Œtrainableæ˜¯Varialeç‰¹æœ‰çš„ï¼š</p>
<ul>
<li><p>name å±æ€§ç”¨äºå‘½åè®¡ç®—å›¾ä¸­çš„å˜é‡ï¼Œè¿™å¥—å‘½åä½“ç³»æ˜¯ TensorFlow å†…éƒ¨ç»´æŠ¤çš„ï¼Œä¸€èˆ¬ä¸éœ€è¦ç”¨æˆ·å…³æ³¨ name å±æ€§ï¼›</p>
</li>
<li><p>trainableå±æ€§è¡¨å¾å½“å‰å¼ é‡æ˜¯å¦éœ€è¦è¢«ä¼˜åŒ–ï¼Œåˆ›å»º Variable å¯¹è±¡æ—¶æ˜¯é»˜è®¤å¯ç”¨ä¼˜åŒ–æ ‡å¿—ï¼Œå¯ä»¥è®¾ç½®trainable&#x3D;False æ¥è®¾ç½®å¼ é‡ä¸éœ€è¦ä¼˜åŒ–ï¼›</p>
</li>
</ul>
<p>é™¤äº†å¯ä»¥ä½¿ç”¨å‡½æ•°è½¬æ¢æ™®é€šå¼ é‡ä»¥å¾—åˆ°Variableå¤–ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ›å»ºVariable</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">21</span>]:<br>a = tf.Variable([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]]) <span class="hljs-comment"># ç›´æ¥åˆ›å»º Variable å¼ é‡</span><br>Out[<span class="hljs-number">21</span>]:<br>&lt;tf.Variable <span class="hljs-string">&#x27;Variable:0&#x27;</span> shape=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) dtype=int32, numpy=array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>],[<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])&gt;<br></code></pre></td></tr></table></figure>



<h2 id="2-åˆ›å»ºå¼ é‡"><a href="#2-åˆ›å»ºå¼ é‡" class="headerlink" title="2.åˆ›å»ºå¼ é‡"></a>2.åˆ›å»ºå¼ é‡</h2><p>tensorflowä¸­å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼åˆ›å»ºå¼ é‡</p>
<h3 id="2-1-æ•°ç»„ã€åˆ—è¡¨å¯¹è±¡å’Œå¼ é‡"><a href="#2-1-æ•°ç»„ã€åˆ—è¡¨å¯¹è±¡å’Œå¼ é‡" class="headerlink" title="2.1 æ•°ç»„ã€åˆ—è¡¨å¯¹è±¡å’Œå¼ é‡"></a>2.1 æ•°ç»„ã€åˆ—è¡¨å¯¹è±¡å’Œå¼ é‡</h3><p>Numpyçš„arrayæ•°ç»„å’Œpythonçš„liståˆ—è¡¨æ˜¯éå¸¸é‡è¦çš„æ•°æ®è½½ä½“å®¹å™¨ï¼›</p>
<blockquote>
<p>é€šè¿‡ tf.convert_to_tensor å‡½æ•°å¯ä»¥åˆ›å»ºæ–° Tensorï¼Œå¹¶å°†ä¿å­˜åœ¨ Python List å¯¹è±¡æˆ–è€…Numpy Array å¯¹è±¡ä¸­çš„æ•°æ®å¯¼å…¥åˆ°æ–° Tensor ä¸­</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">22</span>]:<br>tf.convert_to_tensor([<span class="hljs-number">1</span>,<span class="hljs-number">2.</span>]) <span class="hljs-comment"># ä»åˆ—è¡¨åˆ›å»ºå¼ é‡</span><br>Out[<span class="hljs-number">22</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">86</span>, shape=(<span class="hljs-number">2</span>,), dtype=float32, numpy=array([<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>],<br>dtype=float32)&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">23</span>]:<br>tf.convert_to_tensor(np.array([[<span class="hljs-number">1</span>,<span class="hljs-number">2.</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]])) <span class="hljs-comment"># ä»æ•°ç»„ä¸­åˆ›å»ºå¼ é‡</span><br>Out[<span class="hljs-number">23</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">88</span>, shape=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dtype=float64, numpy=array([[<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>],[<span class="hljs-number">3.</span>, <span class="hljs-number">4.</span>]])&gt;<span class="hljs-comment">#numpyçš„arrayæµ®ç‚¹æ•°ç»„é»˜è®¤ä½¿ç”¨64bitç²¾åº¦ï¼Œå¯ä»¥æ‰‹åŠ¨è½¬æ¢ä¸º32bitçš„ç²¾åº¦ä¿å­˜åœ¨tensorä¸­</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>äº‹å®ä¸Šï¼Œtf.constant()å’Œ tf.convert_to_tensor()éƒ½èƒ½å¤Ÿè‡ªåŠ¨çš„æŠŠ Numpy æ•°ç»„æˆ–è€… Pythonåˆ—è¡¨æ•°æ®ç±»å‹è½¬åŒ–ä¸º Tensor ç±»å‹ï¼ˆæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©å…¶ä¸­ä¸€ä¸ªä½¿ç”¨å³å¯ï¼‰</p>
</blockquote>
<h3 id="2-2-åˆ›å»ºå…¨0-x2F-1å¼ é‡"><a href="#2-2-åˆ›å»ºå…¨0-x2F-1å¼ é‡" class="headerlink" title="2.2 åˆ›å»ºå…¨0&#x2F;1å¼ é‡"></a>2.2 åˆ›å»ºå…¨0&#x2F;1å¼ é‡</h3><p>å°†å¼ é‡åˆ›å»ºä¸ºå…¨ 0 æˆ–è€…å…¨ 1 æ•°æ®æ˜¯éå¸¸å¸¸è§çš„å¼ é‡åˆå§‹åŒ–æ‰‹æ®µï¼›</p>
<blockquote>
<p>é€šè¿‡ tf.zeros()å’Œ tf.ones()å³å¯åˆ›å»ºä»»æ„å½¢çŠ¶ï¼Œä¸”å†…å®¹å…¨ 0 æˆ–å…¨ 1 çš„å¼ é‡ï¼›</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">24</span>]: tf.zeros([]),tf.ones([]) <span class="hljs-comment"># åˆ›å»ºå…¨ 0ï¼Œå…¨ 1 çš„æ ‡é‡</span><br>Out[<span class="hljs-number">24</span>]:<br>(&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">90</span>, shape=(), dtype=float32, numpy=<span class="hljs-number">0.0</span>&gt;,<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">91</span>, shape=(), dtype=float32, numpy=<span class="hljs-number">1.0</span>&gt;)<br></code></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">25</span>]: tf.zeros([<span class="hljs-number">1</span>]),tf.ones([<span class="hljs-number">1</span>]) <span class="hljs-comment"># åˆ›å»ºå…¨ 0ï¼Œå…¨ 1 çš„å‘é‡</span><br>Out[<span class="hljs-number">25</span>]:<br>(&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">96</span>, shape=(<span class="hljs-number">1</span>,), dtype=float32, numpy=array([<span class="hljs-number">0.</span>],dtype=float32)&gt;,<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">99</span>, shape=(<span class="hljs-number">1</span>,), dtype=float32, numpy=array([<span class="hljs-number">1.</span>],dtype=float32)&gt;)<br></code></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">26</span>]: tf.zeros([<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]) <span class="hljs-comment"># åˆ›å»ºå…¨ 0 çŸ©é˜µï¼ŒæŒ‡å®š shape ä¸º 2 è¡Œ 2 åˆ—</span><br>Out[<span class="hljs-number">26</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">104</span>, shape=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dtype=float32, numpy=array([[<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],[<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>]], dtype=float32)&gt;<br><br>In [<span class="hljs-number">27</span>]: tf.ones([<span class="hljs-number">3</span>,<span class="hljs-number">2</span>]) <span class="hljs-comment"># åˆ›å»ºå…¨ 1 çŸ©é˜µï¼ŒæŒ‡å®š shape ä¸º 3 è¡Œ 2 åˆ—</span><br>Out[<span class="hljs-number">27</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">108</span>, shape=(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>), dtype=float32, numpy=array([[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>]], dtype=float32)&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>é€šè¿‡ tf.zeros_like, tf.ones_like å¯ä»¥æ–¹ä¾¿åœ°æ–°å»ºä¸æŸä¸ªå¼ é‡ shape ä¸€è‡´ï¼Œä¸”å†…å®¹ä¸ºå…¨ 0 æˆ–å…¨ 1 çš„å¼ é‡</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">28</span>]: a = tf.ones([<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]) <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªçŸ©é˜µ</span><br>tf.zeros_like(a) <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªä¸ a å½¢çŠ¶ç›¸åŒï¼Œä½†æ˜¯å…¨ 0 çš„æ–°çŸ©é˜µ</span><br>Out[<span class="hljs-number">28</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">113</span>, shape=(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), dtype=float32, numpy=array([[<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],[<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>]], dtype=float32)&gt;<br><br>In [<span class="hljs-number">29</span>]: a = tf.zeros([<span class="hljs-number">3</span>,<span class="hljs-number">2</span>]) <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªçŸ©é˜µ</span><br>tf.ones_like(a) <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªä¸ a å½¢çŠ¶ç›¸åŒï¼Œä½†æ˜¯å…¨ 1 çš„æ–°çŸ©é˜µ</span><br>Out[<span class="hljs-number">29</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">120</span>, shape=(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>), dtype=float32, numpy=array([[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>]], dtype=float32)&gt;<br></code></pre></td></tr></table></figure>

<h3 id="2-3-åˆ›å»ºè‡ªå®šä¹‰æ•°å€¼å¼ é‡"><a href="#2-3-åˆ›å»ºè‡ªå®šä¹‰æ•°å€¼å¼ é‡" class="headerlink" title="2.3 åˆ›å»ºè‡ªå®šä¹‰æ•°å€¼å¼ é‡"></a>2.3 åˆ›å»ºè‡ªå®šä¹‰æ•°å€¼å¼ é‡</h3><blockquote>
<p>é€šè¿‡ tf.fill(shape, value)å¯ä»¥åˆ›å»ºå…¨ä¸ºè‡ªå®šä¹‰æ•°å€¼ value çš„å¼ é‡ï¼Œå½¢çŠ¶ç”± shape å‚æ•°æŒ‡å®š</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">30</span>]:tf.fill([], -<span class="hljs-number">1</span>) <span class="hljs-comment"># åˆ›å»º-1 çš„æ ‡é‡</span><br>Out[<span class="hljs-number">30</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">124</span>, shape=(), dtype=int32, numpy=-<span class="hljs-number">1</span>&gt;<br></code></pre></td></tr></table></figure>

<h3 id="2-4-åˆ›å»ºå·²çŸ¥åˆ†å¸ƒçš„å¼ é‡"><a href="#2-4-åˆ›å»ºå·²çŸ¥åˆ†å¸ƒçš„å¼ é‡" class="headerlink" title="2.4 åˆ›å»ºå·²çŸ¥åˆ†å¸ƒçš„å¼ é‡"></a>2.4 åˆ›å»ºå·²çŸ¥åˆ†å¸ƒçš„å¼ é‡</h3><p>æ­£æ€åˆ†å¸ƒå’Œå‡åŒ€åˆ†å¸ƒæ˜¯æœ€å¸¸è§çš„åˆ†å¸ƒä¹‹ä¸€ï¼Œå› æ­¤åˆ›å»ºé‡‡æ ·è‡ªè¿™ä¸¤ç§åˆ†å¸ƒçš„å¼ é‡éå¸¸æœ‰ç”¨ï¼ˆå·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œå·ç§¯æ ¸å¼ é‡ğ‘¿åˆå§‹åŒ–ä¸ºæ­£æ€åˆ†å¸ƒæœ‰åˆ©äºç½‘ç»œçš„è®­ç»ƒï¼‰</p>
<blockquote>
<p>é€šè¿‡ tf.random.normal(shape, mean&#x3D;0.0, stddev&#x3D;1.0)å¯ä»¥åˆ›å»ºå½¢çŠ¶ä¸º shapeï¼Œå‡å€¼ä¸ºmeanï¼Œæ ‡å‡†å·®ä¸º stddev çš„æ­£æ€åˆ†å¸ƒğ’©(mean,stddev^2^)</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">33</span>]: tf.random.normal([<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]) <span class="hljs-comment"># åˆ›å»ºæ ‡å‡†æ­£æ€åˆ†å¸ƒçš„å¼ é‡(å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼Œmeanå€¼é»˜è®¤æ˜¯0ï¼Œstddevå€¼é»˜è®¤æ˜¯1)</span><br>Out[<span class="hljs-number">33</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">143</span>, shape=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dtype=float32, numpy=array([[-<span class="hljs-number">0.4307344</span> , <span class="hljs-number">0.44147003</span>],[-<span class="hljs-number">0.6563149</span> , -<span class="hljs-number">0.30100572</span>]], dtype=float32)&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>é€šè¿‡ tf.random.uniform(shape, minval&#x3D;0, maxval&#x3D;None, dtype&#x3D;tf.float32)å¯ä»¥åˆ›å»ºé‡‡æ ·è‡ª[minval,maxval)åŒºé—´çš„å‡åŒ€åˆ†å¸ƒçš„å¼ é‡</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">35</span>]: tf.random.uniform([<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]) <span class="hljs-comment"># åˆ›å»ºé‡‡æ ·è‡ª[0,1)å‡åŒ€åˆ†å¸ƒçš„çŸ©é˜µï¼ˆminvalé»˜è®¤å€¼ä¸º0ï¼Œmaxvalé»˜è®¤å€¼ä¸º1ï¼‰</span><br>Out[<span class="hljs-number">35</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">158</span>, shape=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dtype=float32, numpy=array([[<span class="hljs-number">0.65483284</span>, <span class="hljs-number">0.63064325</span>],[<span class="hljs-number">0.008816</span> , <span class="hljs-number">0.81437767</span>]], dtype=float32)&gt;<br></code></pre></td></tr></table></figure>

<p>å¦‚æœéœ€è¦å‡åŒ€é‡‡æ ·æ•´å½¢ç±»å‹çš„æ•°æ®ï¼Œå¿…é¡»æŒ‡å®šé‡‡æ ·åŒºé—´çš„æœ€å¤§å€¼ maxval å‚æ•°ï¼ŒåŒæ—¶æŒ‡å®šæ•°æ®ç±»å‹ä¸º tf.int*å‹</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">37</span>]: <span class="hljs-comment"># åˆ›å»ºé‡‡æ ·è‡ª[0,100)å‡åŒ€åˆ†å¸ƒçš„æ•´å‹çŸ©é˜µ</span><br>tf.random.uniform([<span class="hljs-number">2</span>,<span class="hljs-number">2</span>],maxval=<span class="hljs-number">100</span>,dtype=tf.int32)<br>Out[<span class="hljs-number">37</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">171</span>, shape=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dtype=int32, numpy=array([[<span class="hljs-number">61</span>, <span class="hljs-number">21</span>],[<span class="hljs-number">95</span>, <span class="hljs-number">75</span>]])&gt;<br></code></pre></td></tr></table></figure>

<h3 id="2-5-åˆ›å»ºåºåˆ—"><a href="#2-5-åˆ›å»ºåºåˆ—" class="headerlink" title="2.5 åˆ›å»ºåºåˆ—"></a>2.5 åˆ›å»ºåºåˆ—</h3><p>åœ¨å¾ªç¯è®¡ç®—æˆ–è€…å¯¹å¼ é‡è¿›è¡Œç´¢å¼•æ—¶ï¼Œç»å¸¸éœ€è¦åˆ›å»ºä¸€æ®µè¿ç»­çš„æ•´å‹åºåˆ—ï¼Œå¯ä»¥é€šè¿‡tf.range()å‡½æ•°å®ç°ï¼›</p>
<blockquote>
<p>tf.range(limit, delta&#x3D;1)å¯ä»¥åˆ›å»º[0,limit)ä¹‹é—´ï¼Œæ­¥é•¿ä¸º delta çš„æ•´å‹åºåˆ—ï¼Œä¸åŒ…å« limit æœ¬èº«</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">38</span>]: tf.<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>) <span class="hljs-comment"># 0~10ä¸”æ­¥é•¿ä¸º1ï¼Œä¸åŒ…å« 10</span><br>Out[<span class="hljs-number">38</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">180</span>, shape=(<span class="hljs-number">10</span>,), dtype=int32, numpy=array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>,<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>])&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>é€šè¿‡ tf.range(start, limit, delta&#x3D;1)å¯ä»¥åˆ›å»º[start,limit)ï¼Œæ­¥é•¿ä¸º delta çš„åºåˆ—ï¼Œä¸åŒ…å«limit æœ¬èº«</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">40</span>]: tf.<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,delta=<span class="hljs-number">2</span>) <span class="hljs-comment"># 1~10</span><br>Out[<span class="hljs-number">40</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">190</span>, shape=(<span class="hljs-number">5</span>,), dtype=int32, numpy=array([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>])&gt;<br></code></pre></td></tr></table></figure>

<h2 id="3-ç»´åº¦å˜æ¢"><a href="#3-ç»´åº¦å˜æ¢" class="headerlink" title="3.ç»´åº¦å˜æ¢"></a>3.ç»´åº¦å˜æ¢</h2><p>ï¼ˆå¦‚æœå¯¹äºå¼ é‡çš„åŸºæœ¬æ„ä¹‰è¿˜ä¸å¤ªç†Ÿæ‚‰å¯èƒ½ä¼šè§‰å¾—æœ¬èŠ‚æœ‰ç‚¹æŠ½è±¡ï¼Œå°½é‡ç†è§£ï¼‰</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸¤ä¸ªå¼ é‡ï¼Œbçš„shapeä¸º[3]ï¼ŒXçš„shapeä¸º[2,3]ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦è®¡ç®—X+bï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œå¦‚ä¸‹ä¸¤ä¸ªå¼ é‡çš„è®¡ç®—</p>
<p><img src="/images/image-20221016172221289.png" srcset="/img/loading.gif" lazyload><img src="/images/image-20221016172237802.png" srcset="/img/loading.gif" lazyload></p>
<p>åŸºæœ¬æ€æƒ³æ˜¯è®²shapeä¸º[3]çš„båç½®åæŒ‰ç…§æ ·æœ¬æ•°é‡è¿›è¡Œå¤åˆ¶ï¼Œå°†å…¶å˜æˆå¦‚ä¸‹å½¢å¼çŸ©é˜µ</p>
<p><img src="/images/image-20221016172347448.png" srcset="/img/loading.gif" lazyload></p>
<p>è‡³æ­¤å¯ä»¥å°†ä¸¤ä¸ªshapeç›¸åŒçš„å¼ é‡è¿›è¡Œç›¸åŠ </p>
<p><img src="/images/image-20221016172540905.png" srcset="/img/loading.gif" lazyload></p>
<p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¤§æ¦‚çŸ¥é“ï¼Œç®—æ³•çš„æ¯ä¸ªæ¨¡å—å¯¹äºæ•°æ®å¼ é‡çš„æ ¼å¼æœ‰ä¸åŒçš„é€»è¾‘è¦æ±‚ï¼Œå½“ç°æœ‰çš„æ•°æ®æ ¼å¼ä¸æ»¡è¶³ç®—æ³•è¦æ±‚æ—¶ï¼Œéœ€è¦é€šè¿‡ç»´åº¦å˜æ¢å°†æ•°æ®è°ƒæ•´ä¸ºæ­£ç¡®çš„æ ¼å¼ï¼Œè¿™å°±æ˜¯ç»´åº¦å˜æ¢çš„åŠŸèƒ½ï¼›</p>
<p>åŸºæœ¬çš„ç»´åº¦å˜æ¢æ“ä½œå‡½æ•°åŒ…å«äº†æ”¹å˜è§†å›¾ reshapeã€æ’å…¥æ–°ç»´åº¦ expand_dimsï¼Œåˆ é™¤ç»´åº¦ squeezeã€äº¤æ¢ç»´åº¦ transposeã€å¤åˆ¶æ•°æ® tile ç­‰å‡½æ•°ï¼›</p>
<h3 id="3-1-æ”¹å˜è§†å›¾"><a href="#3-1-æ”¹å˜è§†å›¾" class="headerlink" title="3.1 æ”¹å˜è§†å›¾"></a>3.1 æ”¹å˜è§†å›¾</h3><p>é¦–å…ˆéœ€è¦ä»‹ç»å¼ é‡çš„å­˜å‚¨å’Œè§†å›¾è¿™ä¸¤ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li>è§†å›¾ï¼šå®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬ç†è§£å¼ é‡çš„æ–¹å¼ï¼Œå¦‚shapeä¸º[2,4,4,3]çš„å¼ é‡Aå¯ä»¥è¢«ç†è§£ä¸º2å¼ å›¾ç‰‡ï¼Œæ¯å¼ å›¾ç‰‡4è¡Œ4åˆ—ï¼Œå›¾ç‰‡çš„æ¯ä¸ªä½ç½®(è¡Œ,åˆ—)æœ‰RGB3ä¸ªé€šé“çš„æ•°æ®ï¼›</li>
<li>å­˜å‚¨ï¼šå¼ é‡åœ¨å†…å­˜ä¸Šè¢«ä¿å­˜ä¸ºä¸€æ®µè¿ç»­çš„å†…å­˜åŒºåŸŸï¼›</li>
</ul>
<p>å¯¹äºåŒæ ·çš„å­˜å‚¨ï¼Œå¯ä»¥æœ‰ä¸åŒçš„ç†è§£æ–¹å¼ï¼Œè¿›è€Œäº§ç”Ÿä¸åŒçš„è§†å›¾ï¼›</p>
<p>ç®€å•æ¥è¯´å°±æ˜¯ä¸Šè¿°[2,4,4,3]çš„è§†å›¾è¢«ç†è§£ä¸º[2,48]ä¸€æ ·æ˜¯åˆç†çš„ï¼Œå› ä¸ºå†…å­˜å¹¶ä¸æ”¯æŒç»´åº¦å±‚çº§çš„æ¦‚å¿µï¼Œåªèƒ½ä»¥å¹³é“ºçš„æ–¹å¼æŒ‰åºå†™å…¥å†…å­˜ï¼Œå¯¹äºå†…å­˜çš„å±‚çº§å…³ç³»éœ€è¦äººä¸ºç®¡ç†ï¼š</p>
<ul>
<li>shapeä¸­ç›¸å¯¹é å·¦ä¾§çš„ç»´åº¦ç§°ä¸ºå¤§ç»´åº¦ï¼›</li>
<li>shapeä¸­ç›¸å¯¹é å·¦ä¾§çš„ç»´åº¦ç§°ä¸ºå°ç»´åº¦ï¼›</li>
</ul>
<p>å½“ç„¶æ”¹å˜è§†å›¾éœ€è¦åœ¨åˆæ³•çš„æ“ä½œä¸‹è¿›è¡Œï¼ˆé»˜è®¤å‰ææ˜¯ä¸ä¼šæ”¹å˜å†…å­˜çš„å­˜å‚¨ï¼Œä»…æ”¹å˜æ•°æ®çš„é€»è¾‘ç»“æ„ï¼‰</p>
<p><img src="/images/image-20221016173915812.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>ä»è¯­æ³•ä¸Šæ¥è¯´ï¼Œè§†å›¾å˜æ¢åªéœ€è¦æ»¡è¶³æ–°è§†å›¾çš„å…ƒç´ æ€»é‡ä¸å­˜å‚¨åŒºåŸŸå¤§å°ç›¸ç­‰å³å¯ï¼Œæ­£æ˜¯å› ä¸ºæå°‘çš„è¯­æ³•çº¦æŸå¯¼è‡´å¾ˆå®¹æ˜“åœ¨åˆ‡æ¢è§†å›¾æ—¶å‡ºç°é€»è¾‘éšæ‚£ï¼›</p>
</blockquote>
<p>ä»€ä¹ˆæƒ…å†µä¸‹çš„è§†å›¾å˜æ¢æ˜¯ä¸åˆæ³•çš„å‘¢ï¼Ÿç®€å•ç†è§£å°±æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‰ç…§ç»´åº¦çš„å­˜å‚¨é¡ºåºæ¥å˜æ¢è§†å›¾ï¼Œè¿™å°±å°†å¯¼è‡´æ ¹æ®è§†å›¾æ¢å¤æ•°æ®çš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜ï¼›</p>
<p>ä¾‹å¦‚æ ¹æ®â€œå›¾ç‰‡æ•°é‡-è¡Œ-åˆ—-é€šé“â€åˆå§‹è§†å›¾ä¿å­˜çš„å¼ é‡ï¼Œå­˜å‚¨ä¹Ÿæ˜¯æŒ‰ç…§â€œå›¾ç‰‡æ•°é‡-è¡Œ-åˆ—-é€šé“â€çš„é¡ºåºå†™å…¥çš„ï¼š</p>
<ul>
<li>å¦‚æœæŒ‰ç€â€œå›¾ç‰‡æ•°é‡-åƒç´ -é€šé“â€çš„æ–¹å¼æ¢å¤æ•°æ®ï¼Œå¹¶æ²¡æœ‰ä¸â€œå›¾ç‰‡æ•°é‡-è¡Œ-åˆ—-é€šé“â€ç›¸æ‚–ï¼Œå› æ­¤èƒ½å¾—åˆ°åˆæ³•çš„æ•°æ®ï¼›</li>
<li>ä½†æ˜¯å¦‚æœæŒ‰ç€â€œå›¾ç‰‡æ•°é‡-é€šé“-åƒç´ â€çš„æ–¹å¼æ¢å¤æ•°æ®ï¼Œç”±äºå†…å­˜å¸ƒå±€æ˜¯æŒ‰ç€â€œå›¾ç‰‡æ•°é‡-è¡Œ-åˆ—-é€šé“â€çš„é¡ºåºï¼Œè§†å›¾ç»´åº¦é¡ºåºä¸å­˜å‚¨ç»´åº¦é¡ºåºç›¸æ‚–ï¼Œæå–çš„æ•°æ®å°†æ˜¯é”™ä¹±çš„ï¼›</li>
</ul>
<p>åœ¨ TensorFlow ä¸­ï¼Œå¯ä»¥é€šè¿‡å¼ é‡çš„ ndim å’Œ shape æˆå‘˜å±æ€§è·å¾—å¼ é‡çš„ç»´åº¦æ•°å’Œå½¢çŠ¶</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">68</span>]: x.ndim,x.shape <span class="hljs-comment"># è·å–å¼ é‡çš„ç»´åº¦æ•°å’Œå½¢çŠ¶åˆ—è¡¨</span><br>Out[<span class="hljs-number">68</span>]:(<span class="hljs-number">4</span>, TensorShape([<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>]))<br></code></pre></td></tr></table></figure>

<blockquote>
<p>é€šè¿‡ tf.reshape(x, new_shape)ï¼Œå¯ä»¥å°†å¼ é‡çš„è§†å›¾ä»»æ„åœ°åˆæ³•æ”¹å˜</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">69</span>]: tf.reshape(x,[<span class="hljs-number">2</span>,-<span class="hljs-number">1</span>])<span class="hljs-comment">#å‚æ•°âˆ’1è¡¨ç¤ºå½“å‰è½´ä¸Šé•¿åº¦éœ€è¦æ ¹æ®å¼ é‡æ€»å…ƒç´ ä¸å˜çš„æ³•åˆ™è‡ªåŠ¨æ¨å¯¼ï¼Œä¹Ÿå°±æ˜¯48å®é™…ä¸Šæ˜¯æ ¹æ®2*4*4*3/2å¾—åˆ°</span><br>Out[<span class="hljs-number">69</span>]:&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">520</span>, shape=(<span class="hljs-number">2</span>, <span class="hljs-number">48</span>), dtype=int32, numpy=<br>array([[ <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>,<br>		<span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>, <span class="hljs-number">26</span>, <span class="hljs-number">27</span>, <span class="hljs-number">28</span>, <span class="hljs-number">29</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>,â€¦<br>		<span class="hljs-number">80</span>, <span class="hljs-number">81</span>, <span class="hljs-number">82</span>, <span class="hljs-number">83</span>, <span class="hljs-number">84</span>, <span class="hljs-number">85</span>, <span class="hljs-number">86</span>, <span class="hljs-number">87</span>, <span class="hljs-number">88</span>, <span class="hljs-number">89</span>, <span class="hljs-number">90</span>, <span class="hljs-number">91</span>, <span class="hljs-number">92</span>, <span class="hljs-number">93</span>, <span class="hljs-number">94</span>, <span class="hljs-number">95</span>]])&gt;<br></code></pre></td></tr></table></figure>

<p>å†æ¬¡æ”¹å˜æ•°æ®çš„è§†å›¾ä¸º[2,4,12]</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">70</span>]: tf.reshape(x,[<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">12</span>])<br>Out[<span class="hljs-number">70</span>]:&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">523</span>, shape=(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">12</span>), dtype=int32, numpy=<br>array([[[ <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>],â€¦<br>[<span class="hljs-number">36</span>, <span class="hljs-number">37</span>, <span class="hljs-number">38</span>, <span class="hljs-number">39</span>, <span class="hljs-number">40</span>, <span class="hljs-number">41</span>, <span class="hljs-number">42</span>, <span class="hljs-number">43</span>, <span class="hljs-number">44</span>, <span class="hljs-number">45</span>, <span class="hljs-number">46</span>, <span class="hljs-number">47</span>]],<br>[[<span class="hljs-number">48</span>, <span class="hljs-number">49</span>, <span class="hljs-number">50</span>, <span class="hljs-number">51</span>, <span class="hljs-number">52</span>, <span class="hljs-number">53</span>, <span class="hljs-number">54</span>, <span class="hljs-number">55</span>, <span class="hljs-number">56</span>, <span class="hljs-number">57</span>, <span class="hljs-number">58</span>, <span class="hljs-number">59</span>], â€¦<br>[<span class="hljs-number">84</span>, <span class="hljs-number">85</span>, <span class="hljs-number">86</span>, <span class="hljs-number">87</span>, <span class="hljs-number">88</span>, <span class="hljs-number">89</span>, <span class="hljs-number">90</span>, <span class="hljs-number">91</span>, <span class="hljs-number">92</span>, <span class="hljs-number">93</span>, <span class="hljs-number">94</span>, <span class="hljs-number">95</span>]]])&gt;<br></code></pre></td></tr></table></figure>

<h3 id="3-2-å¢-x2F-åˆ ç»´åº¦"><a href="#3-2-å¢-x2F-åˆ ç»´åº¦" class="headerlink" title="3.2 å¢&#x2F;åˆ ç»´åº¦"></a>3.2 å¢&#x2F;åˆ ç»´åº¦</h3><p>å¢åŠ ç»´åº¦ï¼šå¢åŠ ä¸€ä¸ªé•¿åº¦ä¸º1çš„ç»´åº¦ç›¸å½“äºç»™åŸæœ‰çš„æ•°æ®æ·»åŠ ä¸€ä¸ªæ–°ç»´åº¦çš„æ¦‚å¿µï¼Œç»´åº¦é•¿åº¦ä¸º1ï¼Œæ•…æ•°æ®å¹¶ä¸éœ€è¦æ”¹å˜ï¼Œä»…ä»…æ˜¯æ”¹å˜æ•°æ®çš„ç†è§£æ–¹å¼ï¼ˆè¿™ä¸€ç‚¹å¾ˆæœ‰æ„æ€ï¼Œå…¶å®ä¸èƒ½è¯´æ”¹å˜äº†ç†è§£æ–¹å¼ï¼Œè¿™ç›¸å½“äºåœ¨åŸæ¥çš„ç†è§£æ–¹å¼ä¸Šå¢åŠ æ–°çš„ç†è§£è€Œéæ”¹å˜ç†è§£æ–¹å¼ï¼Œæ³¨æ„åªæœ‰ç»´åº¦é•¿åº¦ä¸º1çš„æ—¶å€™æ‰æœ‰è¿™ä¸ªç»“è®ºï¼‰ï¼Œå› æ­¤å®ƒå…¶å®å¯ä»¥ç†è§£ä¸ºæ”¹å˜è§†å›¾çš„ä¸€ç§ç‰¹æ®Šæ–¹å¼ï¼›</p>
<p>è€ƒè™‘ç»™ä¸€å¼ 28*28çš„ç°åº¦å›¾ç‰‡æ•°æ®ä¿å­˜ä¸ºshapeä¸º[28,28]çš„å¼ é‡ï¼Œæ¥ç€æˆ‘ä»¬åœ¨æœ«å°¾ç»™è¯¥å¼ é‡å¢åŠ ä¸€ä¸ªæ–°çš„ç»´åº¦å®šä¹‰ä¸ºé€šé“ç»´åº¦æ•°ï¼Œåˆ™æ­¤æ—¶å¼ é‡çš„shapeå˜ä¸º[28,28,1]ï¼›</p>
<p>æˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•åœ¨shapeæœ€å‰é¢æ’å…¥ä¸€ä¸ªæ–°çš„ç»´åº¦ï¼Œå‘½åä¸ºå›¾ç‰‡æ•°é‡ç»´åº¦ï¼Œè¯¥ç»´åº¦é•¿åº¦ä¸º1ï¼Œé‚£ä¹ˆæ­¤æ—¶å¼ é‡çš„shapeå˜ä¸º[1,28,28,1]ï¼›</p>
<blockquote>
<p>é€šè¿‡ tf.expand_dims(x, axis)å¯åœ¨æŒ‡å®šçš„ axis è½´å‰å¯ä»¥æ’å…¥ä¸€ä¸ªæ–°çš„ç»´åº¦</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">x = tf.expand_dims(x,axis=<span class="hljs-number">2</span>) <span class="hljs-comment"># axis=2 è¡¨ç¤ºç¬¬ä¸‰ä¸ªç»´åº¦å‰é¢çš„ä¸€ä¸ªç»´åº¦ï¼Œä½¿å¾—shapeæˆä¸º[28,28,1]</span><br>x = tf.expand_dims(x,axis=<span class="hljs-number">0</span>) <span class="hljs-comment"># axis=0 è¡¨ç¤ºåœ¨ç¬¬ä¸€ä¸ªç»´åº¦ä¹‹å‰æ’å…¥æ–°ç»´åº¦ï¼Œä½¿å¾—shapeå˜ä¸º[1,28,28,1]</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>tf.expand_dimsçš„axisä¸ºæ­£æ—¶ï¼Œè¡¨ç¤ºåœ¨å½“å‰ç»´åº¦ä¹‹å‰æ’å…¥ä¸€ä¸ªæ–°ç»´åº¦ï¼Œä¸ºè´Ÿæ—¶ï¼Œè¡¨ç¤ºå½“å‰ç»´åº¦ä¹‹åæ’å…¥ä¸€ä¸ªæ–°çš„ç»´åº¦ï¼›</p>
</blockquote>
<p><img src="/images/image-20221016210749003.png" srcset="/img/loading.gif" lazyload></p>
<p>åˆ é™¤ç»´åº¦æ˜¯å¢åŠ ç»´åº¦çš„é€†å‘æ“ä½œä¸å¢åŠ ç»´åº¦ä¸€æ ·ï¼Œåˆ é™¤ç»´åº¦åªèƒ½åˆ é™¤é•¿åº¦ä¸º 1 çš„ç»´åº¦ï¼Œä¹Ÿä¸ä¼šæ”¹å˜å¼ é‡çš„å­˜å‚¨ï¼›</p>
<blockquote>
<p>å¦‚æœå¸Œæœ›å°†å›¾ç‰‡æ•°é‡ç»´åº¦åˆ é™¤ï¼Œå¯ä»¥é€šè¿‡ tf.squeeze(x, axis)å‡½æ•°</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">x = tf.squeeze(x, axis=<span class="hljs-number">0</span>) <span class="hljs-comment"># åˆ é™¤å›¾ç‰‡æ•°é‡ç»´åº¦å¾—åˆ°[28,28,1]</span><br>x = tf.squeeze(x, axis=<span class="hljs-number">2</span>) <span class="hljs-comment"># åˆ é™¤å›¾ç‰‡é€šé“æ•°ç»´åº¦å¾—åˆ°[28,28]</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœä¸æŒ‡å®šç»´åº¦å‚æ•° axisï¼Œå³ tf.squeeze(x)ï¼Œé‚£ä¹ˆå®ƒä¼šé»˜è®¤åˆ é™¤æ‰€æœ‰é•¿åº¦ä¸º 1 çš„ç»´åº¦</p>
</blockquote>
<p>å¯èƒ½æœ‰äº›è¯»è€…è¿˜æ˜¯è§‰å¾—å¢åŠ ç»´åº¦è¿™ä¸ªåŠŸèƒ½å¾ˆé¸¡è‚‹ï¼Œæˆ‘ä»¬ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­è¯´æ˜ï¼Œç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªshapeä¸º[3]çš„å¼ é‡b</p>
<p><img src="/images/image-20221016212420360.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>é€šè¿‡tf.expand_dims(b, axis&#x3D;0)æ’å…¥æ–°ç»´åº¦ï¼Œå˜æˆshapeä¸º[1,3]çš„å¼ é‡B</p>
</blockquote>
<p><img src="/images/image-20221016212502455.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-3-äº¤æ¢ç»´åº¦"><a href="#3-3-äº¤æ¢ç»´åº¦" class="headerlink" title="3.3 äº¤æ¢ç»´åº¦"></a>3.3 äº¤æ¢ç»´åº¦</h3><p>å°½ç®¡ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•éƒ½ä¸ä¼šå½±å“å¼ é‡çš„å­˜å‚¨ï¼Œä½†æ˜¯ä»…ä»…æ”¹å˜å¼ é‡çš„ç†è§£æ–¹å¼ä¹Ÿå°±æ˜¯æ”¹å˜è§†å›¾å®é™…ä¸Šæ˜¯ä¸å¤Ÿç”¨çš„ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦ç›´æ¥è°ƒæ•´å¼ é‡çš„å­˜å‚¨é¡ºåºï¼Œè¯¥æ“ä½œè¢«ç§°ä¸ºäº¤æ¢ç»´åº¦ï¼›</p>
<p>äº¤æ¢ç»´åº¦æ“ä½œæ˜¯éå¸¸å¸¸è§çš„ï¼Œæ¯”å¦‚åœ¨TensorFlowä¸­ï¼Œå›¾ç‰‡å¼ é‡çš„é»˜è®¤å­˜å‚¨æ ¼å¼æ˜¯é€šé“åè¡Œæ ¼å¼ï¼š[bï¼Œhï¼Œwï¼Œc]ï¼Œä½†æ˜¯éƒ¨åˆ†åº“çš„å›¾ç‰‡æ ¼å¼æ˜¯é€šé“å…ˆè¡Œæ ¼å¼ï¼š[bï¼Œcï¼Œhï¼Œw]ï¼Œå› æ­¤éœ€è¦å®Œæˆ[bï¼Œhï¼Œwï¼Œc]åˆ°[bï¼Œcï¼Œhï¼Œw]ç»´åº¦äº¤æ¢è¿ç®—ï¼Œæ­¤æ—¶è‹¥ç®€å•çš„ä½¿ç”¨æ”¹å˜è§†å›¾å‡½æ•°reshapeï¼Œåˆ™æ–°è§†å›¾çš„å­˜å‚¨æ–¹å¼éœ€è¦æ”¹å˜ï¼ˆåŸå› æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡ï¼‰ï¼Œå› æ­¤ä½¿ç”¨æ”¹å˜è§†å›¾å‡½æ•°æ˜¯ä¸åˆæ³•çš„ï¼›</p>
<blockquote>
<p>æˆ‘ä»¬ä»¥[bï¼Œhï¼Œwï¼Œc]è½¬æ¢åˆ°[bï¼Œcï¼Œhï¼Œw]ä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨tf.transposeï¼ˆxï¼Œpermï¼‰å‡½æ•°å®Œæˆç»´åº¦äº¤æ¢æ“ä½œï¼Œå…¶ä¸­å‚æ•°permè¡¨ç¤ºæ–°ç»´åº¦çš„é¡ºåºListï¼›</p>
</blockquote>
<p>è€ƒè™‘å›¾ç‰‡å¼ é‡shapeä¸º[2,32,32,3]ï¼Œâ€å›¾ç‰‡æ•°é‡ã€è¡Œã€åˆ—ã€é€šé“æ•°â€çš„ç»´åº¦ç´¢å¼•åˆ†åˆ«ä¸º0ã€1ã€2ã€3ï¼Œå¦‚æœéœ€è¦äº¤æ¢ä¸º[b,c,h,w]æ ¼å¼ï¼Œåˆ™æ–°ç»´åº¦çš„æ’åºä¸ºâ€œå›¾ç‰‡æ•°é‡ã€é€šé“æ•°ã€è¡Œã€åˆ—â€ï¼Œå¯¹åº”çš„ç´¢å¼•å·ä¸º[0,3,1,2]ï¼Œå› æ­¤å‚æ•°perméœ€è®¾ç½®ä¸º[0,3,1,2]ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">x = tf.random.normal([<span class="hljs-number">2</span>,<span class="hljs-number">32</span>,<span class="hljs-number">32</span>,<span class="hljs-number">3</span>])<br>tf.transpose(x,perm=[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-comment"># äº¤æ¢ç»´åº¦</span><br></code></pre></td></tr></table></figure>

<p>å¦‚æœå¸Œæœ›å°†[b,h,w,c]äº¤æ¢ä¸º[b,w,h,c]ï¼Œå³å°†é«˜ã€å®½ç»´åº¦äº’æ¢ï¼Œåˆ™æ–°ç»´åº¦ç´¢å¼•ä¸º[0,2,1,3]</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">x = tf.random.normal([<span class="hljs-number">2</span>,<span class="hljs-number">32</span>,<span class="hljs-number">32</span>,<span class="hljs-number">3</span>])<br>tf.transpose(x,perm=[<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>]) <span class="hljs-comment"># äº¤æ¢ç»´åº¦</span><br></code></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡ tf.transpose å®Œæˆç»´åº¦äº¤æ¢åï¼Œå¼ é‡çš„å­˜å‚¨é¡ºåºå·²ç»æ”¹å˜ï¼Œè§†å›¾ä¹Ÿéšä¹‹æ”¹å˜ï¼Œåç»­çš„æ‰€æœ‰æ“ä½œå¿…é¡»åŸºäºæ–°çš„å­˜ç»­é¡ºåºå’Œè§†å›¾è¿›è¡Œï¼›</p>
<h3 id="3-4-å¤åˆ¶æ•°æ®"><a href="#3-4-å¤åˆ¶æ•°æ®" class="headerlink" title="3.4 å¤åˆ¶æ•°æ®"></a>3.4 å¤åˆ¶æ•°æ®</h3><p>å½“é€šè¿‡å¢åŠ ç»´åº¦æ“ä½œæ’å…¥æ–°ç»´åº¦åï¼Œå¯èƒ½å¸Œæœ›åœ¨æ–°çš„ç»´åº¦ä¸Šé¢å¤åˆ¶è‹¥å¹²ä»½æ•°æ®ä»¥æ»¡è¶³åç»­ç®—æ³•çš„æ ¼å¼è¦æ±‚ï¼›</p>
<p>è€ƒè™‘å‰é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨æ–°ç»´åº¦ä¸Šå¤åˆ¶äº†Batch sizeä»½æ•°æ®æ‰èƒ½æ„é€ ä¸€ä¸ªå®Œæ•´çš„shapeä¸º[2,3]çš„å¼ é‡</p>
<p><img src="/images/image-20221016172347448-166592642746416.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>å¯ä»¥é€šè¿‡ tf.tile(x, multiples)å‡½æ•°å®Œæˆæ•°æ®åœ¨æŒ‡å®šç»´åº¦ä¸Šçš„å¤åˆ¶æ“ä½œï¼Œmultiplesåˆ†åˆ«æŒ‡å®šäº†æ¯ä¸ªç»´åº¦ä¸Šé¢çš„å¤åˆ¶å€æ•°ï¼Œå¯¹åº”ä½ç½®ä¸º1è¡¨æ˜ä¸å¤åˆ¶ï¼Œä¸º2è¡¨æ˜æ–°é•¿åº¦ä¸ºåŸæ¥é•¿åº¦çš„2å€ï¼Œå³æ•°æ®å¤åˆ¶ä¸€ä»½ï¼Œä»¥æ­¤ç±»æ¨ï¼›</p>
</blockquote>
<p>åœ¨å®é™…å®éªŒä¸­æˆ‘ä»¬å¹¶ä¸éœ€è¦æ‰‹åŠ¨å¢åŠ ç»´åº¦å¹¶å¤åˆ¶æ•°æ®ï¼Œè¿™äº›æ“ä½œtensorflowä¼šè‡ªåŠ¨å®Œæˆï¼ˆè¿™å°±æ˜¯tensorflowçš„è‡ªåŠ¨æ‰©å±•åŠŸèƒ½ï¼Œä¸”è¯¥åŠŸèƒ½ä¼˜äºæ‰‹åŠ¨å¢åŠ ã€å¤åˆ¶ï¼‰ï¼›</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œtf.tile ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¼ é‡æ¥ä¿å­˜å¤åˆ¶åçš„å¼ é‡ï¼Œç”±äºå¤åˆ¶æ“ä½œæ¶‰åŠå¤§é‡æ•°æ®çš„è¯»å†™ IO è¿ç®—ï¼Œè®¡ç®—ä»£ä»·ç›¸å¯¹è¾ƒé«˜ã€‚ç¥ç»ç½‘ç»œä¸­ä¸åŒ shape ä¹‹é—´çš„å¼ é‡è¿ç®—æ“ä½œååˆ†é¢‘ç¹ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰è½»é‡çº§çš„å¤åˆ¶æ“ä½œå‘¢ï¼Ÿè¿™å°±æ˜¯æ¥ä¸‹æ¥è¦ä»‹ç»çš„ Broadcasting æ“ä½œ</p>
</blockquote>
<h2 id="4-Broadcasting"><a href="#4-Broadcasting" class="headerlink" title="4.Broadcasting"></a>4.Broadcasting</h2><p>Broadcasting ç§°ä¸ºå¹¿æ’­æœºåˆ¶(æˆ–è‡ªåŠ¨æ‰©å±•æœºåˆ¶)ï¼Œå®ƒæ˜¯ä¸€ç§è½»é‡çº§çš„å¼ é‡å¤åˆ¶æ‰‹æ®µï¼Œåœ¨é€»è¾‘ä¸Šæ‰©å±•å¼ é‡æ•°æ®çš„å½¢çŠ¶ï¼Œä½†æ˜¯åªä¼šåœ¨éœ€è¦æ—¶æ‰ä¼šæ‰§è¡Œå®é™…å­˜å‚¨å¤åˆ¶æ“ä½œã€‚å¯¹äºå¤§éƒ¨åˆ†åœºæ™¯ï¼ŒBroadcasting æœºåˆ¶éƒ½èƒ½é€šè¿‡ä¼˜åŒ–æ‰‹æ®µé¿å…å®é™…å¤åˆ¶æ•°æ®è€Œå®Œæˆé€»è¾‘è¿ç®—ï¼Œä»è€Œç›¸å¯¹äºtf.tile å‡½æ•°ï¼Œå‡å°‘äº†å¤§é‡è®¡ç®—ä»£ä»·ï¼›Broadcasting ä¼šé€šè¿‡æ·±åº¦å­¦ä¹ æ¡†æ¶çš„ä¼˜åŒ–æ‰‹æ®µé¿å…å®é™…å¤åˆ¶æ•°æ®è€Œå®Œæˆé€»è¾‘è¿ç®—ï¼Œè‡³äºæ€ä¹ˆå®ç°çš„ç”¨æˆ·ä¸å¿…å…³å¿ƒï¼›</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">x = tf.random.normal([<span class="hljs-number">2</span>,<span class="hljs-number">4</span>])<br>w = tf.random.normal([<span class="hljs-number">4</span>,<span class="hljs-number">3</span>])<br>b = tf.random.normal([<span class="hljs-number">3</span>])<br>y = x@w+b <span class="hljs-comment"># ä¸åŒ shape çš„å¼ é‡ç›´æ¥ç›¸åŠ </span><br></code></pre></td></tr></table></figure>

<p>ä¸Šè¿°è¿ç®—åœ¨tensorflowä¸­æ˜¯åˆæ³•çš„ï¼Œå› ä¸ºå®ƒè‡ªåŠ¨è°ƒç”¨ Broadcastingå‡½æ•° tf.broadcast_to(x, new_shape)ï¼Œå°†bçš„shapeæ‰©å±•ä¸ºä¸x@wçš„shapeç›¸åŒçš„[2,3]</p>
<blockquote>
<p>Broadcasting æœºåˆ¶å¹¶ä¸ä¼šæ‰°ä¹±æ­£å¸¸çš„è®¡ç®—é€»è¾‘ï¼Œå®ƒåªä¼šé’ˆå¯¹äºæœ€å¸¸è§çš„åœºæ™¯è‡ªåŠ¨å®Œæˆå¢åŠ ç»´åº¦å¹¶å¤åˆ¶æ•°æ®çš„åŠŸèƒ½</p>
</blockquote>
<p>å½“ç„¶broadcastingæœºåˆ¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œåœ¨å¯¹ä¸¤ä¸ªshapeå³å¯¹é½åå®ƒéœ€è¦è¿›è¡Œæ™®é€‚æ€§åˆ¤æ–­ï¼š</p>
<ul>
<li><p>å¯¹äºé•¿åº¦ä¸º 1 çš„ç»´åº¦ï¼Œé»˜è®¤è¿™ä¸ªæ•°æ®æ™®éé€‚åˆäºå½“å‰ç»´åº¦çš„å…¶ä»–ä½ç½®ï¼›</p>
</li>
<li><p>å¯¹äºä¸å­˜åœ¨çš„ç»´åº¦ï¼Œåˆ™åœ¨å¢åŠ æ–°ç»´åº¦åé»˜è®¤å½“å‰æ•°æ®ä¹Ÿæ˜¯æ™®é€‚äºæ–°ç»´åº¦çš„ï¼Œä»è€Œå¯ä»¥æ‰©å±•ä¸ºæ›´å¤šç»´åº¦æ•°ã€ä»»æ„é•¿åº¦çš„å¼ é‡å½¢çŠ¶ï¼Œå¦‚[32,1]å¯ä»¥ç›´æ¥broadcastingä¸º[2,32,32,4]ï¼›</p>
</li>
<li><p>å¯¹äºå·²ç»å­˜åœ¨ä¸”é•¿åº¦ä¸ä¸º1çš„ç»´åº¦åˆ™ä¸ç¬¦åˆæ™®é€‚æ€§åŸåˆ™å¦‚[32,2]ä¸èƒ½ç›´æ¥broadcastingä¸º[2,32,32,4]</p>
</li>
</ul>
<p><img src="/images/image-20221016214353010.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="5-æ•°å­¦è¿ç®—"><a href="#5-æ•°å­¦è¿ç®—" class="headerlink" title="5.æ•°å­¦è¿ç®—"></a>5.æ•°å­¦è¿ç®—</h2><p>æœ¬èŠ‚ä»‹ç»tensorflowä¸­å¸¸è§çš„æ•°å­¦è¿ç®—å‡½æ•°ï¼›</p>
<h3 id="5-1-å››åˆ™è¿ç®—"><a href="#5-1-å››åˆ™è¿ç®—" class="headerlink" title="5.1 å››åˆ™è¿ç®—"></a>5.1 å››åˆ™è¿ç®—</h3><blockquote>
<p>åŠ ã€å‡ã€ä¹˜ã€é™¤æ˜¯æœ€åŸºæœ¬çš„æ•°å­¦è¿ç®—ï¼Œåˆ†åˆ«é€šè¿‡ tf.add, tf.subtract, tf.multiply, tf.divideå‡½æ•°å®ç°ï¼ŒTensorFlow å·²ç»é‡è½½äº†+ã€ âˆ’ã€ âˆ— ã€&#x2F;è¿ç®—ç¬¦ï¼Œä¸€èˆ¬æ¨èç›´æ¥ä½¿ç”¨è¿ç®—ç¬¦æ¥å®ŒæˆåŠ ã€å‡ã€ä¹˜ã€é™¤è¿ç®—ï¼›æ•´é™¤å’Œä½™é™¤ä¹Ÿæ˜¯å¸¸è§çš„è¿ç®—ä¹‹ä¸€ï¼Œåˆ†åˆ«é€šè¿‡&#x2F;&#x2F;å’Œ%è¿ç®—ç¬¦å®ç°ï¼›</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">89</span>]:<br>a = tf.<span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)<br>b = tf.constant(<span class="hljs-number">2</span>)<br>a//b <span class="hljs-comment"># æ•´é™¤è¿ç®—</span><br>Out[<span class="hljs-number">89</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">115</span>, shape=(<span class="hljs-number">5</span>,), dtype=int32, numpy=array([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>])&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">90</span>]: a%b <span class="hljs-comment"># ä½™é™¤è¿ç®—</span><br>Out[<span class="hljs-number">90</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">117</span>, shape=(<span class="hljs-number">5</span>,), dtype=int32, numpy=array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>])&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>ä¹˜æ–¹è¿ç®—å¯ä»¥é€šè¿‡tf.pow(x,a)å®Œæˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦**å®Œæˆ</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">91</span>]:<br>x = tf.<span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>)<br>tf.<span class="hljs-built_in">pow</span>(x,<span class="hljs-number">3</span>) <span class="hljs-comment"># ä¹˜æ–¹è¿ç®—</span><br>Out[<span class="hljs-number">91</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">124</span>, shape=(<span class="hljs-number">4</span>,), dtype=int32, numpy=array([ <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">27</span>])&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">92</span>]: x**<span class="hljs-number">2</span> <span class="hljs-comment"># ä¹˜æ–¹è¿ç®—ç¬¦</span><br>Out[<span class="hljs-number">92</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">127</span>, shape=(<span class="hljs-number">4</span>,), dtype=int32, numpy=array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>])&gt;<br></code></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬å°†æŒ‡æ•°è®¾ç½®ä¸ºåˆ†æ•°ï¼Œåˆ™å¯ä»¥å®ç°å¼€æ–¹è¿ç®—</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">93</span>]: x=tf.constant([<span class="hljs-number">1.</span>,<span class="hljs-number">4.</span>,<span class="hljs-number">9.</span>])<br>x**(<span class="hljs-number">0.5</span>) <span class="hljs-comment"># å¹³æ–¹æ ¹</span><br>Out[<span class="hljs-number">93</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">139</span>, shape=(<span class="hljs-number">3</span>,), dtype=float32, numpy=array([<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>],dtype=float32)&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>ç‰¹åˆ«åœ°ï¼Œå¯¹äºå¸¸è§çš„å¹³æ–¹å’Œå¹³æ–¹æ ¹è¿ç®—ï¼Œå¯ä»¥ä½¿ç”¨ tf.square(x)å’Œ tf.sqrt(x)å®ç°ï¼›</p>
</blockquote>
<h3 id="5-2-æŒ‡æ•°å’Œå¯¹æ•°è¿ç®—"><a href="#5-2-æŒ‡æ•°å’Œå¯¹æ•°è¿ç®—" class="headerlink" title="5.2 æŒ‡æ•°å’Œå¯¹æ•°è¿ç®—"></a>5.2 æŒ‡æ•°å’Œå¯¹æ•°è¿ç®—</h3><blockquote>
<p>æŒ‡æ•°è¿ç®—å¯ä»¥é€šè¿‡tf.pow(x,a)å®Œæˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦**å®Œæˆï¼ˆå› ä¸ºä¹˜æ–¹x^a^å’ŒæŒ‡æ•°è¿ç®—a^x^éƒ½æ˜¯ç›¸åŒçš„å½¢å¼ï¼Œåªæ˜¯å‚æ•°çš„ä½ç½®ä¸åŒï¼‰</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">96</span>]: x = tf.constant([<span class="hljs-number">1.</span>,<span class="hljs-number">2.</span>,<span class="hljs-number">3.</span>])<br><span class="hljs-number">2</span>**x <span class="hljs-comment"># æŒ‡æ•°è¿ç®—</span><br>Out[<span class="hljs-number">96</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">179</span>, shape=(<span class="hljs-number">3</span>,), dtype=float32, numpy=array([<span class="hljs-number">2.</span>, <span class="hljs-number">4.</span>, <span class="hljs-number">8.</span>],dtype=float32)&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>ç‰¹åˆ«åœ°ï¼Œå¯¹äºè‡ªç„¶æŒ‡æ•°e^x^ ï¼Œå¯ä»¥é€šè¿‡tf.exp(x)å®ç°ï¼›</p>
</blockquote>
<blockquote>
<p>åœ¨TensorFlowä¸­ï¼Œè‡ªç„¶å¯¹æ•°log<del>e</del>xå¯ä»¥é€šè¿‡ tf.math.log(x)å®ç°</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">98</span>]: x=tf.exp(<span class="hljs-number">3.</span>)<span class="hljs-comment">#è‡ªç„¶æŒ‡æ•°è¿ç®—</span><br>tf.math.log(x) 		 <span class="hljs-comment">#å¯¹æ•°è¿ç®—</span><br>Out[<span class="hljs-number">98</span>]:<br>&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">186</span>, shape=(), dtype=float32, numpy=<span class="hljs-number">3.0</span>&gt;<br></code></pre></td></tr></table></figure>

<p>å¦‚æœéœ€è¦è®¡ç®—å…¶ä»–åº•æ•°çš„å¯¹æ•°ï¼Œéœ€è¦ä½¿ç”¨å¯¹æ•°çš„æ¢åº•å…¬å¼</p>
<p><img src="/images/image-20221017081531164.png" srcset="/img/loading.gif" lazyload></p>
<p>é—´æ¥æ€§å®ç°ï¼ˆå½“ç„¶è¿™æœ¬ä¹¦æ˜¯2019å¹´å†™çš„ï¼Œ2022å¹´åº”è¯¥å·²ç»å…·å¤‡ç›´æ¥è®¡ç®—å…¶ä»–åº•æ•°çš„å¯¹æ•°çš„å‡½æ•°äº†ï¼‰ï¼›</p>
<h3 id="5-3-çŸ©é˜µä¹˜æ³•"><a href="#5-3-çŸ©é˜µä¹˜æ³•" class="headerlink" title="5.3 çŸ©é˜µä¹˜æ³•"></a>5.3 çŸ©é˜µä¹˜æ³•</h3><p>å…¶å®è¿™é‡Œç§°ä½œå¼ é‡ä¹˜æ³•æ›´åŠ åˆé€‚ï¼›</p>
<blockquote>
<p>å¯ä»¥é€šè¿‡@è¿ç®—ç¬¦æˆ–è€…tf.matmul(a,b)å‡½æ•°å®ç°çŸ©é˜µä¹˜æ³•ï¼Œtensorflowä¸­çš„çŸ©é˜µæ”¯æŒæ‰¹é‡æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å¼ é‡Aå’ŒBçš„ç»´åº¦æ•°å¯ä»¥å¤§äº2ï¼Œæ­¤æ—¶tensorflowä¼šé€‰æ‹©Aå’ŒBçš„æœ€åä¸¤ä¸ªç»´åº¦è¿›è¡ŒçŸ©é˜µç›¸ä¹˜ï¼Œå°†å‰é¢æ‰€æœ‰çš„ç»´åº¦éƒ½è§†ä½œbatchç»´åº¦ï¼›</p>
</blockquote>
<p>æ ¹æ®çŸ©é˜µç›¸ä¹˜çš„å®šä¹‰ï¼Œğ‘©å’Œğ‘ªèƒ½å¤ŸçŸ©é˜µç›¸ä¹˜çš„æ¡ä»¶æ˜¯ï¼Œğ‘©çš„å€’æ•°ç¬¬ä¸€ä¸ªç»´åº¦é•¿åº¦(åˆ—)å’Œğ‘ªçš„å€’æ•°ç¬¬äºŒä¸ªç»´åº¦é•¿åº¦(è¡Œ)å¿…é¡»ç›¸ç­‰ï¼Œæ¯”å¦‚å¼ é‡a shape:[4,3,28,32]å¯ä»¥ä¸å¼ é‡b shape:[4,3,32,2]è¿›è¡ŒçŸ©é˜µç›¸ä¹˜ï¼›</p>
<p>å½“ç„¶å¼ é‡ä¹˜æ³•å‡½æ•°åŒæ ·æ”¯æŒbroadcastingæœºåˆ¶</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">a = tf.random.normal([<span class="hljs-number">4</span>,<span class="hljs-number">28</span>,<span class="hljs-number">32</span>])<br>b = tf.random.normal([<span class="hljs-number">32</span>,<span class="hljs-number">16</span>])<br>tf.matmul(a,b) <span class="hljs-comment">#é¦–å…ˆä¼šå°†bæ‹“å±•ä¸ºshape[4,32,16]ï¼Œå†ä¸å¼ é‡aè¿›è¡Œæ‰¹é‡å½¢å¼åœ°çŸ©é˜µç›¸ä¹˜ï¼Œå¾—åˆ°ç»“æœçš„shapeä¸º[4,28,16]</span><br></code></pre></td></tr></table></figure>

<h1 id="ç¬¬äºŒç« -tensorflow2-xè¿›é˜¶"><a href="#ç¬¬äºŒç« -tensorflow2-xè¿›é˜¶" class="headerlink" title="ç¬¬äºŒç«  tensorflow2.xè¿›é˜¶"></a>ç¬¬äºŒç«  tensorflow2.xè¿›é˜¶</h1><h2 id="1-åˆå¹¶ä¸åˆ†å‰²"><a href="#1-åˆå¹¶ä¸åˆ†å‰²" class="headerlink" title="1.åˆå¹¶ä¸åˆ†å‰²"></a>1.åˆå¹¶ä¸åˆ†å‰²</h2><h3 id="1-1-æ‹¼æ¥ä¸å †å "><a href="#1-1-æ‹¼æ¥ä¸å †å " class="headerlink" title="1.1 æ‹¼æ¥ä¸å †å "></a>1.1 æ‹¼æ¥ä¸å †å </h3><p>åˆå¹¶æ˜¯æŒ‡å°†å¤šä¸ªå¼ é‡åœ¨æŸä¸ªç»´åº¦ä¸Šåˆå¹¶ä¸ºä¸€ä¸ªå¼ é‡ï¼›</p>
<p>ä»¥æŸå­¦æ ¡ç­çº§æˆç»©å†Œæ•°æ®ä¸ºä¾‹ï¼Œè®¾å¼ é‡ğ‘©ä¿å­˜äº†æŸå­¦æ ¡ 1~4 å·ç­çº§çš„æˆç»©å†Œï¼Œæ¯ä¸ªç­çº§ 35 ä¸ªå­¦ç”Ÿï¼Œå…± 8 é—¨ç§‘ç›®æˆç»©ï¼Œåˆ™å¼ é‡ğ‘©çš„ shape ä¸ºï¼š[4,35,8]ï¼›åŒæ ·çš„æ–¹å¼ï¼Œå¼ é‡ğ‘ªä¿å­˜äº†å…¶å®ƒ 6 ä¸ªç­çº§çš„æˆç»©å†Œï¼Œshape ä¸º[6,35,8]ã€‚é€šè¿‡åˆå¹¶è¿™ 2 ä»½æˆç»©å†Œï¼Œä¾¿å¯å¾—åˆ°å­¦æ ¡æ‰€æœ‰ç­çº§çš„æˆç»©å†Œï¼Œè®°ä¸ºå¼ é‡ğ‘«ï¼Œshape åº”ä¸º[10,35,8]ï¼Œå…¶ä¸­ï¼Œ10 ä»£è¡¨ 10 ä¸ªç­çº§ï¼Œ35 ä»£è¡¨ 35 ä¸ªå­¦ç”Ÿï¼Œ8 ä»£è¡¨ 8 é—¨ç§‘ç›®ã€‚è¿™å°±æ˜¯å¼ é‡åˆå¹¶çš„æ„ä¹‰æ‰€åœ¨ï¼›</p>
<p>å¼ é‡çš„åˆå¹¶å¯ä»¥ä½¿ç”¨æ‹¼æ¥(Concatenate)å’Œå †å (Stack)æ“ä½œå®ç°ï¼š</p>
<ul>
<li>æ‹¼æ¥æ“ä½œå¹¶ä¸ä¼šäº§ç”Ÿæ–°çš„ç»´åº¦ï¼Œä»…åœ¨ç°æœ‰çš„ç»´åº¦ä¸Šåˆå¹¶ï¼Œè€Œå †å ä¼šåˆ›å»ºæ–°ç»´åº¦ï¼›</li>
</ul>
<p>é€‰æ‹©ä½¿ç”¨æ‹¼æ¥è¿˜æ˜¯å †å æ“ä½œæ¥åˆå¹¶å¼ é‡ï¼Œå–å†³äºå…·ä½“çš„åœºæ™¯æ˜¯å¦éœ€è¦åˆ›å»ºæ–°ç»´åº¦ï¼›</p>
<blockquote>
<p>åœ¨ TensorFlow ä¸­ï¼Œå¯ä»¥é€šè¿‡ tf.concat(tensors, axis)å‡½æ•°æ‹¼æ¥å¼ é‡ï¼Œå…¶ä¸­å‚æ•°tensors ä¿å­˜äº†æ‰€æœ‰éœ€è¦åˆå¹¶çš„å¼ é‡ Listï¼Œaxis å‚æ•°æŒ‡å®šéœ€è¦åˆå¹¶çš„ç»´åº¦ç´¢å¼•</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">a = tf.random.normal([<span class="hljs-number">4</span>,<span class="hljs-number">35</span>,<span class="hljs-number">8</span>]) <span class="hljs-comment"># æ¨¡æ‹Ÿæˆç»©å†Œ A</span><br>b = tf.random.normal([<span class="hljs-number">6</span>,<span class="hljs-number">35</span>,<span class="hljs-number">8</span>]) <span class="hljs-comment"># æ¨¡æ‹Ÿæˆç»©å†Œ B</span><br>tf.concat([a,b],axis=<span class="hljs-number">0</span>) <span class="hljs-comment"># æ‹¼æ¥åˆå¹¶æˆç»©å†Œï¼Œå› ä¸ºç­çº§ç»´åº¦ç´¢å¼•å·ä¸º0ï¼Œæ‰€ä»¥axis=0</span><br></code></pre></td></tr></table></figure>

<p>ä»è¯­æ³•ä¸Šæ¥è¯´ï¼Œæ‹¼æ¥åˆå¹¶æ“ä½œå¯ä»¥åœ¨ä»»æ„çš„ç»´åº¦ä¸Šè¿›è¡Œï¼Œå”¯ä¸€çš„çº¦æŸæ˜¯éåˆå¹¶ç»´åº¦çš„é•¿åº¦å¿…é¡»ä¸€è‡´ã€‚æ¯”å¦‚ shapeä¸º[4,32,8]å’Œshapeä¸º[6,35,8]çš„å¼ é‡ä¸èƒ½ç›´æ¥åœ¨ç­çº§ç»´åº¦ä¸Šè¿›è¡Œåˆå¹¶ï¼Œå› ä¸ºå­¦ç”Ÿæ•°é‡ç»´åº¦çš„é•¿åº¦å¹¶ä¸ä¸€è‡´ï¼Œä¸€ä¸ªä¸º32ï¼Œå¦ä¸€ä¸ªä¸º35ï¼›</p>
<blockquote>
<p>ä½¿ç”¨ tf.stack(tensors, axis)å¯ä»¥å †å æ–¹å¼åˆå¹¶å¤šä¸ªå¼ é‡ï¼Œé€šè¿‡ tensors åˆ—è¡¨è¡¨ç¤ºï¼Œå‚æ•°axis æŒ‡å®šæ–°ç»´åº¦æ’å…¥çš„ä½ç½®ï¼Œaxis çš„ç”¨æ³•ä¸ tf.expand_dims çš„ä¸€è‡´ï¼š</p>
<ul>
<li>å½“axis â‰¥ 0æ—¶ï¼Œåœ¨axisä¹‹å‰æ’å…¥ï¼›</li>
<li>å½“axis &lt; 0æ—¶ï¼Œåœ¨axisä¹‹åæ’å…¥æ–°ç»´åº¦ï¼›</li>
</ul>
</blockquote>
<p><img src="/images/image-20221017083532446.png" srcset="/img/loading.gif" lazyload></p>
<p>å¦‚æœæƒ³è¦åœ¨åˆå¹¶çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªæ–°çš„ç»´åº¦ï¼Œå°±éœ€è¦ä½¿ç”¨å †å ï¼›</p>
<p>è€ƒè™‘å¼ é‡ğ‘©ä¿å­˜äº†æŸä¸ªç­çº§çš„æˆç»©å†Œï¼Œshape ä¸º[35,8]ï¼Œå¼ é‡ğ‘ªä¿å­˜äº†å¦ä¸€ä¸ªç­çº§çš„æˆç»©å†Œï¼Œshape ä¸º[35,8]ã€‚åˆå¹¶è¿™ 2 ä¸ªç­çº§çš„æ•°æ®æ—¶ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°ç»´åº¦ï¼Œå®šä¹‰ä¸ºç­çº§ç»´åº¦ï¼Œæ–°ç»´åº¦å¯ä»¥é€‰æ‹©æ”¾ç½®åœ¨ä»»æ„ä½ç½®ï¼Œä¸€èˆ¬æ ¹æ®å¤§å°ç»´åº¦çš„ç»éªŒæ³•åˆ™ï¼Œå°†è¾ƒå¤§æ¦‚å¿µçš„ç­çº§ç»´åº¦æ”¾ç½®åœ¨å­¦ç”Ÿç»´åº¦ä¹‹å‰ï¼›</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">a = tf.random.normal([<span class="hljs-number">35</span>,<span class="hljs-number">8</span>])<br>b = tf.random.normal([<span class="hljs-number">35</span>,<span class="hljs-number">8</span>])<br>tf.stack([a,b],axis=<span class="hljs-number">0</span>) <span class="hljs-comment"># å †å åˆå¹¶ä¸º 2 ä¸ªç­çº§ï¼Œç­çº§ç»´åº¦æ’å…¥åœ¨æœ€å‰</span><br></code></pre></td></tr></table></figure>

<p>tf.stack ä¹Ÿéœ€è¦æ»¡è¶³å¼ é‡å †å åˆå¹¶æ¡ä»¶ï¼Œå®ƒéœ€è¦æ‰€æœ‰å¾…åˆå¹¶çš„å¼ é‡ shape å®Œå…¨ä¸€è‡´æ‰å¯åˆå¹¶ï¼›</p>
<h3 id="1-2-åˆ†å‰²"><a href="#1-2-åˆ†å‰²" class="headerlink" title="1.2 åˆ†å‰²"></a>1.2 åˆ†å‰²</h3><p>åˆå¹¶æ“ä½œçš„é€†è¿‡ç¨‹å°±æ˜¯åˆ†å‰²ï¼Œå°†ä¸€ä¸ªå¼ é‡åˆ†æ‹†ä¸ºå¤šä¸ªå¼ é‡ã€‚ç»§ç»­è€ƒè™‘æˆç»©å†Œçš„ä¾‹å­ï¼Œæˆ‘ä»¬å¾—åˆ°æ•´ä¸ªå­¦æ ¡çš„æˆç»©å†Œå¼ é‡ï¼Œshape ä¸º[10,35,8]ï¼Œç°åœ¨éœ€è¦å°†æ•°æ®åœ¨ç­çº§ç»´åº¦åˆ‡å‰²ä¸º10 ä¸ªå¼ é‡ï¼Œæ¯ä¸ªå¼ é‡ä¿å­˜äº†å¯¹åº”ç­çº§çš„æˆç»©å†Œæ•°æ®ï¼›</p>
<blockquote>
<p>é€šè¿‡ tf.split(x, num_or_size_splits, axis)å¯ä»¥å®Œæˆå¼ é‡çš„åˆ†å‰²æ“ä½œï¼š</p>
<ul>
<li>x å‚æ•°ï¼šå¾…åˆ†å‰²å¼ é‡ã€‚</li>
<li>num_or_size_splits å‚æ•°ï¼šåˆ‡å‰²æ–¹æ¡ˆã€‚å½“ num_or_size_splits ä¸ºå•ä¸ªæ•°å€¼æ—¶ï¼Œå¦‚ 10ï¼Œè¡¨ç¤ºç­‰é•¿åˆ‡å‰²ä¸º 10 ä»½ï¼›å½“ num_or_size_splits ä¸º List æ—¶ï¼ŒList çš„æ¯ä¸ªå…ƒç´ è¡¨ç¤ºæ¯ä»½çš„é•¿åº¦ï¼Œå¦‚[2,4,2,2]è¡¨ç¤ºåˆ‡å‰²ä¸º 4 ä»½ï¼Œæ¯ä»½çš„é•¿åº¦ä¾æ¬¡æ˜¯ 2ã€4ã€2ã€2ã€‚</li>
<li>axis å‚æ•°ï¼šæŒ‡å®šåˆ†å‰²çš„ç»´åº¦ç´¢å¼•å·</li>
</ul>
</blockquote>
<p>ä¸Šè¿°æˆç»©å†Œåˆ†å‰²çš„ä¾‹å­ä»£ç å¦‚ä¸‹</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">8</span>]:<br>x = tf.random.normal([<span class="hljs-number">10</span>,<span class="hljs-number">35</span>,<span class="hljs-number">8</span>])<br><span class="hljs-comment"># ç­‰é•¿åˆ‡å‰²ä¸º 10 ä»½</span><br>result = tf.split(x, num_or_size_splits=<span class="hljs-number">10</span>, axis=<span class="hljs-number">0</span>)<br><span class="hljs-built_in">len</span>(result) <span class="hljs-comment"># è¿”å›çš„åˆ—è¡¨ä¸ºåŒ…å«åˆ‡å‰²åçš„ 10 ä¸ªå¼ é‡çš„åˆ—è¡¨ï¼Œresult[0]è¡¨ç¤ºç¬¬ä¸€ä¸ªç­çº§çš„æˆç»©å†Œæ•°æ®ï¼Œå…¶shapeä¸º[1,35,8]</span><br>Out[<span class="hljs-number">8</span>]: <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šä½¿ç”¨splitåˆ‡å‰²ä¸ç­‰äºé™ç»´ï¼Œåˆ‡å‰²åçš„å¼ é‡ä»ç„¶ä¿æŒäº†å…ˆå‰çš„ç»´åº¦ï¼›</p>
<blockquote>
<p>ç‰¹åˆ«åœ°ï¼Œå¦‚æœå¸Œæœ›åœ¨æŸä¸ªç»´åº¦ä¸Šå…¨éƒ¨æŒ‰é•¿åº¦ä¸º 1 çš„æ–¹å¼åˆ†å‰²ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ tf.unstack(x,axis)å‡½æ•°ã€‚è¿™ç§æ–¹å¼æ˜¯ tf.split çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œåˆ‡å‰²é•¿åº¦å›ºå®šä¸º 1ï¼Œåªéœ€è¦æŒ‡å®šåˆ‡å‰²ç»´åº¦çš„ç´¢å¼•å·å³å¯</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">11</span>]: x = tf.random.normal([<span class="hljs-number">10</span>,<span class="hljs-number">35</span>,<span class="hljs-number">8</span>])<br>result = tf.unstack(x,axis=<span class="hljs-number">0</span>) <span class="hljs-comment"># Unstack ä¸ºé•¿åº¦ä¸º 1 çš„å¼ é‡</span><br><span class="hljs-built_in">len</span>(result) <span class="hljs-comment"># è¿”å› 10 ä¸ªå¼ é‡çš„åˆ—è¡¨</span><br>Out[<span class="hljs-number">11</span>]: <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šä½¿ç”¨unstackåˆ‡å‰²ä¼šå¯¼è‡´ç»´åº¦æ¶ˆå¤±ï¼Œè¿™ä¹Ÿæ˜¯å®ƒå’Œsplitçš„åŒºåˆ«ï¼›</p>
<h2 id="2-ç»Ÿè®¡å±æ€§"><a href="#2-ç»Ÿè®¡å±æ€§" class="headerlink" title="2.ç»Ÿè®¡å±æ€§"></a>2.ç»Ÿè®¡å±æ€§</h2><p>åœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦ç»Ÿè®¡æ•°æ®çš„å„ç§å±æ€§å¦‚å‡å€¼ã€èŒƒæ•°ç­‰ä¿¡æ¯ï¼Œä¹‹æ‰€ä»¥è¦è·å–è¿™äº›ä¿¡æ¯æ˜¯å› ä¸ºå¼ é‡ä¸€èˆ¬éƒ½å¾ˆåºå¤§ï¼Œç›´æ¥è§‚å¯Ÿå¾ˆéš¾è·å–æœ‰ç”¨ä¿¡æ¯ï¼Œé€šè¿‡è·å–è¿™äº›å¼ é‡çš„ç»Ÿè®¡å±æ€§å¯ä»¥è¾ƒè½»æ¾åœ°æ¨æµ‹å¼ é‡æ•°å€¼çš„åˆ†å¸ƒï¼›</p>
<h3 id="2-1-å‘é‡èŒƒæ•°"><a href="#2-1-å‘é‡èŒƒæ•°" class="headerlink" title="2.1 å‘é‡èŒƒæ•°"></a>2.1 å‘é‡èŒƒæ•°</h3><p>å‘é‡èŒƒæ•°(Vector Norm)æ˜¯è¡¨å¾å‘é‡â€œé•¿åº¦â€çš„ä¸€ç§åº¦é‡æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ¨å¹¿åˆ°å¼ é‡ä¸Šï¼Œåœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºå¼ é‡çš„æƒå€¼å¤§å°ï¼Œæ¢¯åº¦å¤§å°ç­‰ï¼›</p>
<ul>
<li><p>L1 èŒƒæ•°ï¼Œå®šä¹‰ä¸ºå‘é‡ğ’™çš„æ‰€æœ‰å…ƒç´ ç»å¯¹å€¼ä¹‹å’Œ<img src="/images/image-20221017085741998.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>L2 èŒƒæ•°ï¼Œå®šä¹‰ä¸ºå‘é‡ğ’™çš„æ‰€æœ‰å…ƒç´ çš„å¹³æ–¹å’Œå¼€æ ¹å·<img src="/images/image-20221017085822412.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>âˆ èŒƒæ•°ï¼Œå®šä¹‰ä¸ºå‘é‡ğ’™çš„æ‰€æœ‰å…ƒç´ ç»å¯¹å€¼çš„æœ€å¤§å€¼<img src="/images/image-20221017085909130.png" srcset="/img/loading.gif" lazyload></p>
</li>
</ul>
<p>å°½ç®¡ä¸Šè¿°å…¬å¼éƒ½æ˜¯é’ˆå¯¹å‘é‡çš„ï¼Œåœ¨åº”å¯¹çŸ©é˜µå’Œå¼ é‡æ—¶éƒ½å¯ä»¥å°†å…¶å¹³é“ºä¸ºå‘é‡å†è¿›è¡ŒèŒƒæ•°çš„è®¡ç®—ï¼›</p>
<blockquote>
<p>åœ¨ TensorFlow ä¸­ï¼Œå¯ä»¥é€šè¿‡ tf.norm(x, ord)æ±‚è§£å¼ é‡çš„ L1ã€L2ã€âˆ ç­‰èŒƒæ•°ï¼Œå…¶ä¸­å‚æ•°ord æŒ‡å®šä¸º 1ã€2 æ—¶è®¡ç®— L1ã€L2 èŒƒæ•°ï¼ŒæŒ‡å®šä¸º np.inf æ—¶è®¡ç®—âˆ èŒƒæ•°</p>
</blockquote>
<h3 id="2-2-æœ€å€¼ã€å‡å€¼"><a href="#2-2-æœ€å€¼ã€å‡å€¼" class="headerlink" title="2.2 æœ€å€¼ã€å‡å€¼"></a>2.2 æœ€å€¼ã€å‡å€¼</h3><blockquote>
<p>é€šè¿‡ tf.reduce_maxã€tf.reduce_minã€tf.reduce_meanã€tf.reduce_sum å‡½æ•°å¯ä»¥æ±‚è§£å¼ é‡åœ¨æŸä¸ªç»´åº¦ä¸Šçš„æœ€å¤§ã€æœ€å°ã€å‡å€¼ã€å’Œï¼Œä¹Ÿå¯ä»¥æ±‚å…¨å±€æœ€å¤§ã€æœ€å°ã€å‡å€¼ã€å’Œä¿¡æ¯</p>
</blockquote>
<p>å½“ä¸æŒ‡å®š axis å‚æ•°æ—¶ï¼Œtf.reduce_*å‡½æ•°ä¼šæ±‚è§£å‡ºå…¨å±€å…ƒç´ çš„æœ€å¤§ã€æœ€å°ã€å‡å€¼ã€å’Œç­‰æ•°æ®</p>
<blockquote>
<p>é€šè¿‡ tf.argmax(x, axis)å’Œ tf.argmin(x, axis)å¯ä»¥æ±‚è§£åœ¨ axis è½´ä¸Šï¼Œx çš„æœ€å¤§å€¼ã€æœ€å°å€¼æ‰€åœ¨çš„ç´¢å¼•å·</p>
</blockquote>
<h2 id="3-å¼ é‡æ¯”è¾ƒ"><a href="#3-å¼ é‡æ¯”è¾ƒ" class="headerlink" title="3.å¼ é‡æ¯”è¾ƒ"></a>3.å¼ é‡æ¯”è¾ƒ</h2><p><img src="/images/image-20221017090748916.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="4-æ•°æ®é™å¹…"><a href="#4-æ•°æ®é™å¹…" class="headerlink" title="4.æ•°æ®é™å¹…"></a>4.æ•°æ®é™å¹…</h2><p>ç°åœ¨è€ƒè™‘å¦‚ä½•å®ç°éçº¿æ€§æ¿€æ´»å‡½æ•°ReLu(è¿™ä¸ªå‡½æ•°çš„æœ¬è´¨å¾ˆç®€å•ï¼Œå°±æ˜¯æœ€å°æ•°å€¼ä¸º0)ï¼Œå¯ä»¥é€šè¿‡æ•°æ®é™å¹…å®ç°ï¼Œåªéœ€è¦é™åˆ¶å…ƒç´ çš„èŒƒå›´ğ‘¦ âˆˆ [0,+âˆ)å³å¯ï¼›</p>
<blockquote>
<p>åœ¨ TensorFlow ä¸­ï¼Œå¯ä»¥é€šè¿‡ tf.maximum(x, a)å®ç°æ•°æ®å…ƒç´ çš„ä¸‹é™å¹…ï¼Œå³ğ‘¦ âˆˆ [ğ‘,+âˆ)ï¼›å¯ä»¥é€šè¿‡ tf.minimum(x, a)å®ç°æ•°æ®å…ƒç´ çš„ä¸Šé™å¹…ï¼Œå³ğ‘¦ âˆˆ (âˆ’âˆ,ğ‘]</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">33</span>]:x = tf.<span class="hljs-built_in">range</span>(<span class="hljs-number">9</span>)<br>tf.maximum(x,<span class="hljs-number">2</span>) <span class="hljs-comment"># ä¸‹é™å¹…åˆ° 2</span><br>Out[<span class="hljs-number">33</span>]:&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">48</span>, shape=(<span class="hljs-number">9</span>,), dtype=int32, numpy=array([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>,<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>])&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">34</span>]:tf.minimum(x,<span class="hljs-number">7</span>) <span class="hljs-comment"># ä¸Šé™å¹…åˆ° 7</span><br>Out[<span class="hljs-number">34</span>]:&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">41</span>, shape=(<span class="hljs-number">9</span>,), dtype=int32, numpy=array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>,<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>])&gt;<br></code></pre></td></tr></table></figure>

<p>é€šè¿‡ç»„åˆ tf.maximum(x, a)å’Œ tf.minimum(x, b)å¯ä»¥å®ç°åŒæ—¶å¯¹æ•°æ®çš„ä¸Šä¸‹è¾¹ç•Œé™å¹…ï¼Œå³ğ‘¦ âˆˆ [ğ‘,ğ‘]</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">35</span>]:x = tf.<span class="hljs-built_in">range</span>(<span class="hljs-number">9</span>)<br>tf.minimum(tf.maximum(x,<span class="hljs-number">2</span>),<span class="hljs-number">7</span>) <span class="hljs-comment"># é™å¹…ä¸º 2~7</span><br>Out[<span class="hljs-number">35</span>]:&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">57</span>, shape=(<span class="hljs-number">9</span>,), dtype=int32, numpy=array([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>,<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>])&gt;<br></code></pre></td></tr></table></figure>

<p>æ›´æ–¹ä¾¿åœ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ tf.clip_by_value å‡½æ•°å®ç°ä¸Šä¸‹é™å¹…</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py">In [<span class="hljs-number">36</span>]:x = tf.<span class="hljs-built_in">range</span>(<span class="hljs-number">9</span>)<br>tf.clip_by_value(x,<span class="hljs-number">2</span>,<span class="hljs-number">7</span>) <span class="hljs-comment"># é™å¹…ä¸º 2~7</span><br>Out[<span class="hljs-number">36</span>]:&lt;tf.Tensor: <span class="hljs-built_in">id</span>=<span class="hljs-number">66</span>, shape=(<span class="hljs-number">9</span>,), dtype=int32, numpy=array([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>,<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>])&gt;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ä»¬è§£å†³åˆšå¼€å§‹çš„é—®é¢˜ï¼Œå®ç°ä¸€ä¸ªReLuå‡½æ•°ï¼Œåªéœ€è¦ä½¿ç”¨åˆ°maximum</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">relu</span>(<span class="hljs-params">x</span>): <span class="hljs-comment"># ReLU å‡½æ•°</span><br>	<span class="hljs-keyword">return</span> tf.maximum(x,<span class="hljs-number">0.</span>) <span class="hljs-comment"># ä¸‹é™å¹…ä¸º 0 å³å¯</span><br></code></pre></td></tr></table></figure>

<h1 id="ç¬¬ä¸‰ç« -tensorflow2-xé«˜çº§"><a href="#ç¬¬ä¸‰ç« -tensorflow2-xé«˜çº§" class="headerlink" title="ç¬¬ä¸‰ç«  tensorflow2.xé«˜çº§"></a>ç¬¬ä¸‰ç«  tensorflow2.xé«˜çº§</h1><p>æœ¬ç« æˆ‘ä»¬ä¸»è¦ä»‹ç»å¦‚ä½•å°†ç¥ç»ç½‘ç»œã€æœºå™¨å­¦ä¹ ç­‰æŠ½è±¡çš„æ¦‚å¿µç”¨tensorflowå®ç°ï¼ˆè¿™ä¸€ç« å¾ˆæœ‰å¯èƒ½éœ€è¦æ‰‹å†™å¹¶è¿›è¡Œçº¸ä¸Šæ¼”ç®—ï¼Œéœ€è¦éå¸¸å¤šçš„æ¨å¯¼ï¼Œéœ€è¦è€å¿ƒï¼‰ï¼›</p>
<blockquote>
<p>æˆ‘å…¶å®ä¸€ç›´æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¿™äº›æ•™æéƒ½åªæ˜¯æ•™æˆ‘ä»¬æ€ä¹ˆè°ƒç”¨APIï¼Œä½†æ˜¯å¯¹äºä¸€äº›è¯­æ³•è§„åˆ™åªå­—ä¸æï¼Œæ¯”å¦‚è¯´ä¸ºä»€ä¹ˆè¦ç”¨withï¼Œä¸ºä»€ä¹ˆè¦ç”¨defï¼Ÿè¿™äº›é—®é¢˜å¦‚æœä¸è‡ªè¡Œä¸Šç½‘æœç´¢æ ¹æœ¬å°±æ‰¾ä¸åˆ°ï¼›</p>
</blockquote>
<h2 id="1-æ•°æ®å¯è§†åŒ–"><a href="#1-æ•°æ®å¯è§†åŒ–" class="headerlink" title="1.æ•°æ®å¯è§†åŒ–"></a>1.æ•°æ®å¯è§†åŒ–</h2><p>é¦–å…ˆæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹tensorflowä¸­tensorboardåŒ…çš„ä½¿ç”¨ï¼Œè¿™ä¸ªå¯è§†åŒ–å·¥å…·åœ¨æœºå™¨å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹ä¸­å°¤å…¶é‡è¦ï¼›ï¼ˆå°½ç®¡ç°åœ¨æˆ‘å¹¶ä¸çŸ¥é“tensorboardæ˜¯å¦ä¼šå—åˆ°tensorflowç‰ˆæœ¬çš„ä¸åŒå¸¦æ¥çš„å½±å“ï¼‰</p>
<p>æ³¨æ„ä¸€ä¸ªå¾ˆå®¹æ˜“æ··æ·†çš„ç‚¹å°±æ˜¯ï¼Œæ•°æ®å¯è§†åŒ–ä¸å®Œå…¨ç­‰äºç®€å•çš„è°ƒç”¨matplotlibåº“ç”»å‡ºæ•°æ®æ›²çº¿ï¼Œå½“æˆ‘ä»¬é¢å¯¹ä¸€äº›é«˜çº§çš„è¿‡ç¨‹æ—¶å°±éœ€è¦é€‰æ‹©tensorboardå·¥å…·ï¼›</p>
<p>ï¼ˆå…³é”®æ˜¯å¸‚é¢ä¸Šçš„tensorboardæ•™ç¨‹çœŸçš„å¥½å°‘å•Šæˆ‘çš„å¤©ï¼ŒçœŸæ˜¯æ— è¯­äº†â€¦)</p>
<p>å‚è€ƒé“¾æ¥:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/deephub/article/details/123086159">(1æ¡æ¶ˆæ¯) TensorBoardçš„æœ€å…¨ä½¿ç”¨æ•™ç¨‹ï¼šçœ‹è¿™ç¯‡å°±å¤Ÿäº†_deephubçš„åšå®¢-CSDNåšå®¢_tensorboard</a></li>
</ul>
<hr>
<p>tensorboardä½œä¸ºtensorflowçš„å¯è§†åŒ–å·¥å…·ï¼Œé€šè¿‡TensorFlowç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ—¥å¿—æ–‡ä»¶æ¥å¯¹TensorFlowçš„ç¨‹åºè¿è¡ŒçŠ¶æ€è¿›è¡Œå¯è§†åŒ–ï¼Œå®ƒä¸TensorFlowè·‘åœ¨ä¸¤ä¸ªä¸åŒçš„è¿›ç¨‹ä¸­ï¼›</p>
<p>TensorBoardä¸éœ€è¦é¢å¤–å®‰è£…ï¼Œåœ¨TensorFlowå®‰è£…æ—¶å·²è‡ªåŠ¨å®Œæˆï¼Œåœ¨Anaconda Promptä¸­å…ˆè¿›å…¥æ—¥å¿—å­˜æ”¾çš„ç›®å½•ï¼ˆéå¸¸é‡è¦ï¼‰ï¼Œå†è¿è¡ŒTensorBoardï¼Œå¹¶å°†æ—¥å¿—çš„åœ°å€æŒ‡å‘ç¨‹åºæ—¥å¿—è¾“å‡ºçš„åœ°å€ï¼›</p>
<p>å¯åŠ¨æœåŠ¡çš„ç«¯å£é»˜è®¤ä¸º6006ï¼›ä½¿ç”¨ â€“port å‚æ•°å¯ä»¥æ”¹ç¼–å¯åŠ¨æœåŠ¡çš„ç«¯å£ï¼ŒTensorBoardæ˜¯ä¸€ä¸ªåœ¨æœ¬åœ°å¯åŠ¨çš„æœåŠ¡ï¼Œå¯åŠ¨å®Œæˆååœ¨æµè§ˆå™¨ç½‘å€ï¼š<a href="http://localhost:6006å³å¯è¿›è¡Œè®¿é—®ï¼›">http://localhost:6006å³å¯è¿›è¡Œè®¿é—®ï¼›</a></p>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„tensorboard API</p>
<p><img src="/images/image-20221013171135994.png" srcset="/img/loading.gif" lazyload></p>
<p>TensorBoardæä¾›äº†å¾ˆå¤šç§æ•°æ®ç±»å‹çš„æ˜¾ç¤ºï¼š</p>
<ul>
<li><p>æ ‡é‡é€šè¿‡tf.summary.scalar()å‡½æ•°æ˜¾ç¤ºï¼›</p>
</li>
<li><p>å›¾åƒé€šè¿‡tf.summary.image()å‡½æ•°æ˜¾ç¤ºï¼›</p>
</li>
<li><p>å£°éŸ³é€šè¿‡tf.summary.audio()å‡½æ•°æ˜¾ç¤ºï¼›</p>
</li>
<li><p>å¼ é‡é€šè¿‡tf.summary.histogram()å‡½æ•°æ˜¾ç¤ºï¼›</p>
</li>
</ul>
<p>è¿™äº›æ‘˜è¦çš„æ“ä½œå®šä¹‰å®Œæ¯•åï¼Œå¯ä»¥é€šè¿‡tf.summary.merge_all()å‡½æ•°æŠŠå®ƒä»¬åˆå¹¶èµ·æ¥ï¼Œåˆå¹¶åçš„æ‘˜è¦æ“ä½œå°±å¯ä»¥é€šè¿‡sessionæ¥è¿è¡Œï¼Œå¾—åˆ°æ‘˜è¦ä¿¡æ¯ï¼ˆsummary_strï¼‰ï¼Œé€šè¿‡FileWriteå†™å…¥äº‹ä»¶æ—¥å¿—æ–‡ä»¶ä¸­ï¼›</p>
<p><img src="/images/image-20221017201341150.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>tensorflowåŒ…çš„å¤§è‡´ä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š</p>
</blockquote>
<ol>
<li>è®¾ç½®ä¿å­˜è·¯å¾„: tenboard_dir &#x3D; â€˜.&#x2F;MNISTâ€™</li>
<li>æŒ‡å®šâ½‚ä»¶â½¤æ¥ä¿å­˜TensorFlowçš„å›¾ï¼ˆåˆ†ä¸ºtrainå’Œtestå›¾ï¼‰</li>
<li>æŠŠå›¾addä¿å­˜åœ¨æœ¬åœ°ç£ç›˜</li>
<li>è¿›â¼Šâ½£æˆçš„eventsâ½‚ä»¶çš„ä¸Šâ¼€çº§â½‚ä»¶å¤¹â½¬å½•ä¸­ï¼Œå¦‚åœ¨DOSçª—â¼è¿â¾å‘½ä»¤ï¼š <code>tensorboard --logdir=test</code> æˆ– <code>tensorboard --logdir=train</code></li>
<li>å¤åˆ¶ç»ˆç«¯è¿”å›çš„â½¹å€ï¼Œä½¿â½¤æµè§ˆå™¨è¿›â¼Šè¯¥â½¹å€</li>
</ol>
<h3 id="1-1-å¯åŠ¨tensorboard"><a href="#1-1-å¯åŠ¨tensorboard" class="headerlink" title="1.1 å¯åŠ¨tensorboard"></a>1.1 å¯åŠ¨tensorboard</h3><p>æœ¬åœ°å¯åŠ¨tensorboardä½¿ç”¨å‘½ä»¤è¡Œè¿è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tensorboard --logdir=&lt;directory_name&gt;  <br></code></pre></td></tr></table></figure>

<p>æ³¨æ„å°†<code>directory_name</code>æ ‡è®°æ›¿æ¢ä¸ºä¿å­˜æ•°æ®çš„ç›®å½•ï¼Œé»˜è®¤æ˜¯â€™logsâ€™ï¼›</p>
<p>ä½¿ç”¨å…¶ä»–ç«¯å£å¼€å¯æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tensorboard --logdir=test --host=127.0.0.1 --port=8008<br></code></pre></td></tr></table></figure>

<p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨jupyter notebookä¸­ä½¿ç”¨tensorboardï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">%load_ext tensorboard<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œä¸Šè¿°ä»£ç å°†åŠ è½½ TensorBoardå¹¶å…è®¸æˆ‘ä»¬å°†å…¶ç”¨äºå¯è§†åŒ–ï¼ŒåŠ è½½æ‰©å±•åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å¯åŠ¨ TensorBoardï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">%tensorboard --logdir logs<br></code></pre></td></tr></table></figure>

<p>ï¼ˆåœ¨jupyter notebookä¸­å¯åŠ¨å‡ ä¹æ˜¯ä¸å¯èƒ½æˆåŠŸçš„â€¦ä¸€ç›´æ˜¾ç¤ºç«¯å£è¢«å ç”¨ï¼‰</p>
<h2 id="2-tensorflowæ–‡æœ¬æ–‡ä»¶"><a href="#2-tensorflowæ–‡æœ¬æ–‡ä»¶" class="headerlink" title="2.tensorflowæ–‡æœ¬æ–‡ä»¶"></a>2.tensorflowæ–‡æœ¬æ–‡ä»¶</h2><p>å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_24263553/article/details/107517256">(15æ¡æ¶ˆæ¯) tensorflowä¸­checkpointå„ä¸ªæ–‡ä»¶å­˜æ”¾çš„æ˜¯å•¥_checkpointæ–‡ä»¶_çˆ±åƒé±¼çš„å°ç‹åŒå­¦çš„åšå®¢-CSDNåšå®¢</a>ï¼›</li>
<li><a target="_blank" rel="noopener" href="https://www.deeplearn.me/3978.html">Checkpoint - ç®—æ³•ä¹‹é“ (deeplearn.me)</a>ï¼›</li>
</ul>
<p><img src="/images/image-20230324084131686.png" srcset="/img/loading.gif" lazyload></p>
<p>checkpointä¹Ÿç§°ä¸ºæ£€æŸ¥ç‚¹ï¼Œä¿å­˜äº†ä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰çš„æ¨¡å‹æ–‡ä»¶åˆ—è¡¨ï¼Œå­˜å‚¨ç€æ¨¡å‹modelä½¿ç”¨çš„æ‰€æœ‰çš„tf.Variable å¯¹è±¡ä»¥åŠæ¨¡å‹ç»“æ„çš„å®šä¹‰ï¼›</p>
<ul>
<li>checkpointæ–‡ä»¶ï¼šæ–‡æœ¬æ–‡ä»¶ï¼Œå¯ç›´æ¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼Œè®°å½•äº†è®­ç»ƒè¿‡ç¨‹ä¸­åœ¨æ‰€æœ‰ä¸­é—´èŠ‚ç‚¹ä¸Šä¿å­˜çš„æ¨¡å‹çš„åç§°ï¼Œé¦–è¡Œè®°å½•çš„æ˜¯æœ€åï¼ˆæœ€è¿‘ï¼‰ä¸€æ¬¡ä¿å­˜çš„æ¨¡å‹åç§°ï¼›</li>
<li>dataæ–‡ä»¶ï¼šæ•°æ®æ–‡ä»¶ï¼Œä¿å­˜çš„æ˜¯ç½‘ç»œçš„æƒå€¼ï¼Œåç½®ï¼Œæ“ä½œç­‰ï¼›</li>
<li>indexæ–‡ä»¶ï¼šindexæ–‡ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¸å¯å˜çš„å­—ç¬¦ä¸²è¡¨ï¼Œæ¯ä¸€ä¸ªé”®éƒ½æ˜¯å¼ é‡çš„åç§°ï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ªåºåˆ—åŒ–çš„BundleEntryProtoã€‚ æ¯ä¸ªBundleEntryProtoæè¿°å¼ é‡çš„å…ƒæ•°æ®ï¼šâ€œæ•°æ®â€æ–‡ä»¶ä¸­çš„å“ªä¸ªæ–‡ä»¶åŒ…å«å¼ é‡çš„å†…å®¹ï¼Œè¯¥æ–‡ä»¶çš„åç§»é‡ï¼Œæ ¡éªŒå’Œï¼Œä¸€äº›è¾…åŠ©æ•°æ®ç­‰ï¼›</li>
<li>metaæ–‡ä»¶ï¼šmetaæ–‡ä»¶ä¿å­˜çš„æ˜¯å›¾ç»“æ„ï¼Œé€šä¿—åœ°è®²å°±æ˜¯ç¥ç»ç½‘ç»œçš„ç½‘ç»œç»“æ„ï¼Œä¸€èˆ¬è€Œè¨€ç½‘ç»œç»“æ„æ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥å¯ä»¥åªä¿å­˜ä¸€ä¸ªï¼›</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># ä½¿ç”¨å¦‚ä¸‹ä»£ç åªåœ¨ç¬¬ä¸€æ¬¡ä¿å­˜metaæ–‡ä»¶</span><br>saver.save(sess, <span class="hljs-string">&#x27;my_model.ckpt&#x27;</span>, global_step=step, write_meta_graph=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¢å¤æ•´ä¸ªgraphç»“æ„</span><br>tf.train.import_meta_graph(â€˜xxxxxx.metaâ€™)<br></code></pre></td></tr></table></figure>






























































              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%87%AA%E5%AD%A6%E8%AF%BE%E7%A8%8B/" class="category-chain-item">è‡ªå­¦è¯¾ç¨‹</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">#æœºå™¨å­¦ä¹ </a>
      
        <a href="/tags/python/">#python</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Tensorflow</div>
      <div>https://gintoki-jpg.github.io/2022/10/13/å·¥å…·_tensorflow/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>æ¨å†ä¿¨</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2022å¹´10æœˆ13æ—¥</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>è®¸å¯åè®®</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/10/24/%E9%80%9A%E8%AF%86_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" title="æ•°æ®ç»“æ„ä¸ç®—æ³•">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">æ•°æ®ç»“æ„ä¸ç®—æ³•</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/09/30/%E9%A1%B9%E7%9B%AE_%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8/" title="åˆçº§é¡¹ç›®_è¯æ³•åˆ†æå™¨">
                        <span class="hidden-mobile">åˆçº§é¡¹ç›®_è¯æ³•åˆ†æå™¨</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    

  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  

</div>


  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>







  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
